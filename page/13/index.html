<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="My Little World" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0">






<meta property="og:type" content="website">
<meta property="og:title" content="My Little World">
<meta property="og:url" content="http://yoohannah.github.io/page/13/index.html">
<meta property="og:site_name" content="My Little World">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="My Little World">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoohannah.github.io/page/13/">





  <title> My Little World </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">My Little World</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">learn and share</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoohannah.github.io/post/performance/optimization.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="YooHannah">
    <meta itemprop="description" content>
    <meta itemprop="image" content="/psb.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="My Little World">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="My Little World" src>
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/performance/optimization.html" itemprop="url">
                  关于性能优化
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-24T09:16:02+08:00">
                2018-03-24
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="优化哪些方面"><a href="#优化哪些方面" class="headerlink" title="优化哪些方面"></a>优化哪些方面</h1><p>加载速度<br>呈现效果</p>
<h1 id="图片的优化"><a href="#图片的优化" class="headerlink" title="图片的优化"></a>图片的优化</h1><p>常见图片有三类<br>矢量图：几何图形<br>位图：像素<br>交错图：随加载过程模糊到清晰</p>
<p>使用策略<br>·是否有必要使用图片（可不可以不使用；效果能不能用CSS代替–&gt;套路大列表）<br>·使用合适的格式（小体积webp；矢量图&gt;位图；内容jpeg,修饰png,动画video/svg&gt;gif）</p>
<p>加载策略&lt;提高用户体验&gt;<br>·先加载小图onload之后再加载交错大图<br>·懒加载<br>·尽量减少http请求,合理的使用雪碧图和base64编码的图片</p>
<p>CssSprites:页面风格多变,经常换肤；无需重复图形内容；不会增加css文件体积<br>Base64:极小极简单图片，可复用,适用小图标（缺点：css文件体积增大,导致解析时间变长）</p>
<h1 id="其他资源的优化"><a href="#其他资源的优化" class="headerlink" title="其他资源的优化"></a>其他资源的优化</h1><p>也适用于图片</p>
<p>·懒加载：图片；组件，模块<br>·预加载：提前加载下一页；异步加载，提前发送数据请求加载数据资源<br>·减小传输体积——压缩；减少传输数量——打包<br>·打包分块，资源复用<br>·加快速度——静态资源放CDN<br>·网速，服务器响应,CDN</p>
<h1 id="提高首页-加载速度"><a href="#提高首页-加载速度" class="headerlink" title="提高首页/加载速度"></a>提高首页/加载速度</h1><p>·雪碧图<br>·js放底部，css放头部<br>·减少DOM数量<br>·script标签设置异步加载async<br>·减少DNS查找,允许高度并行下载;<br>·减少http请求<br>·设置http头部缓存字段expires,E-tag,last-modified；减少/不使用cookie</p>
<p><a href="https://github.com/TeamStuQ/skill-map/blob/master/data/map-MobilePerformanceOptimization.md" target="_blank" rel="noopener">移动端性能优化</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoohannah.github.io/post/safe/monitor.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="YooHannah">
    <meta itemprop="description" content>
    <meta itemprop="image" content="/psb.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="My Little World">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="My Little World" src>
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/safe/monitor.html" itemprop="url">
                  关于监控
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-19T09:43:37+08:00">
                2018-03-19
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="为什么要做监控"><a href="#为什么要做监控" class="headerlink" title="为什么要做监控"></a>为什么要做监控</h1><p>对自己的网站做到错误提前预知和排查<br>统计自己的网站相关数据,对网站进行优化</p>
<h1 id="监控什么"><a href="#监控什么" class="headerlink" title="监控什么"></a>监控什么</h1><p>业务数据：<br>PV(PAGE VIEW,页面浏览量,一个用户打开了网站的几个页面)<br>UV(unique visitor,访问某个站点或点击某条新闻的不同IP地址的人数)<br>点击率<br>转化率(浏览人数与注册人数之间的比率)<br>跳出率(浏览与离开/不喜欢的人数之间的比率)</p>
<p>稳定性：<br>所提供服务是否稳定，能否得知偏远地区数据稳定性<br>网络挂断情况能否立即得知,而不是通过用户告知<br>异地双活(A地的机器中断工作,通过切换其他地方的机器来提供服务)</p>
<p>性能：<br>首屏打开的性能<br>……</p>
<p>错误：<br>用户端的错误上报</p>
<p>用户操作路径：<br>操作流程,方便跟踪错误</p>
<h1 id="怎么进行监控"><a href="#怎么进行监控" class="headerlink" title="怎么进行监控"></a>怎么进行监控</h1><p>根据监控的对象/内容将监控的数据进行上报,然后根据上报寻找异常</p>
<p>PV/UV,业务操作的上报；<br>将页面性能数据进行上报; ======&gt;huatuo<br>将页面产生的错误上报；========&gt;badjs<br>跟踪用户操作,将操作路径/流程上报;<br>接口请求成功与否的上报<br>用户数据的上报</p>
<p>一般的上报方案是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var img = new Image</span><br><span class="line">img.src = `$&#123;url&#125;`</span><br><span class="line">//url是上报的接口,上报的数据随接口给到后台</span><br></pre></td></tr></table></figure></p>
<p>1.上报不需要返回值,Image请求不会返回值<br>2.可以自动跨域,拿不到返回值，上报也不需要确定是否上报成功</p>
<p>服务端拿到接口传过来的数据，将数据写到log文件中，<br>在需要时进行搜索统计，或者在定时/计划任务时进行查询</p>
<p><a href="http://www.cnblogs.com/longjshz/p/5805903.html" target="_blank" rel="noopener">使用grep命令进行查找</a><br><a href="https://cloud.tencent.com/developer/article/1004564" target="_blank" rel="noopener">bad.js使用</a></p>
<h1 id="上报"><a href="#上报" class="headerlink" title="上报"></a>上报</h1><h2 id="业务数据上报"><a href="#业务数据上报" class="headerlink" title="业务数据上报"></a>业务数据上报</h2><h3 id="人工标上报点"><a href="#人工标上报点" class="headerlink" title="人工标上报点"></a>人工标上报点</h3><p>对onclick等触发事件手动帮上上报函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function report(data)&#123;</span><br><span class="line">var url = &apos;....&apos;+data</span><br><span class="line">	var img = new Image</span><br><span class="line">  img.src = `$&#123;url&#125;`</span><br><span class="line">&#125; </span><br><span class="line">dom.addEventListener(&quot;click&quot;, report);</span><br></pre></td></tr></table></figure></p>
<h3 id="点击截获上报"><a href="#点击截获上报" class="headerlink" title="点击截获上报"></a>点击截获上报</h3><p>通过事件冒泡和DOM上的标记找到对应行动点,获取具体操作对象DOM进行上报</p>
<h3 id="百度统计-google-analytics"><a href="#百度统计-google-analytics" class="headerlink" title="百度统计/google analytics"></a>百度统计/google analytics</h3><p>通过发送带上COOKIE的Image请求来定位用户与站点信息,对整个页面做定位</p>
<p>若用户把cookie清除了怎么办？<br>1.尝试让用户啊登录<br>2.百度、谷歌一般有多个登录态，可以给没有cookie的用户先注册个临时ID，等登录后再映射回来<br>3.浏览器终端机器本身可以产生一些类似mac地址的唯一识别码的东西，根据识别码进行跟踪，<br>或者使用指纹采集，fingerprint.js等手段为用户生成指纹进行跟踪</p>
<h3 id="其他方案"><a href="#其他方案" class="headerlink" title="其他方案"></a>其他方案</h3><p>将log数据线存储的本地IndexDB等地方，必要时服务器发起收集;<br>基于DSL的切面事件(before,after)，将监控事件可以自动注入，这样实现配置平台让产品也可以自定义上报</p>
<p><a href="https://www.cnblogs.com/Wolfmanlq/p/6036019.html" target="_blank" rel="noopener">轻松理解AOP思想(面向切面编程)</a></p>
<h3 id="如何利用业务数据"><a href="#如何利用业务数据" class="headerlink" title="如何利用业务数据"></a>如何利用业务数据</h3><p>查看统计业务情况<br>检查系统稳定性<br>错误如何产生<br>是否被非法套嵌<br>检测性能优化程度</p>
<h2 id="性能数据上报"><a href="#性能数据上报" class="headerlink" title="性能数据上报"></a>性能数据上报</h2><p>查看真实用户页面打开情况<br>通过时间这个维度去看</p>
<h3 id="打点上报"><a href="#打点上报" class="headerlink" title="打点上报"></a>打点上报</h3><p>在指定位置标记一些时间点标识，然后进行统计</p>
<h3 id="利用permance-timing"><a href="#利用permance-timing" class="headerlink" title="利用permance.timing"></a>利用permance.timing</h3><p><a href="https://yoohannah.github.io/post/knowledge/Performance.html">关于Performance API</a></p>
<h3 id="如何利用性能数据"><a href="#如何利用性能数据" class="headerlink" title="如何利用性能数据"></a>如何利用性能数据</h3><p>用户真实数据，如白屏时间，从产品/经验值看是否能接收，是否需要优化<br>对于某些地区的响应慢，是不是网络问题，是否推动网络或CDN优化<br>验证性能优化效果<br>找到一个参考值，通过流程化的方式让未来我们的项目都能达到一个基准线</p>
<h2 id="稳定性监控"><a href="#稳定性监控" class="headerlink" title="稳定性监控"></a>稳定性监控</h2><p>主要靠后端，前端做辅助</p>
<h2 id="错误上报-bad-js"><a href="#错误上报-bad-js" class="headerlink" title="错误上报(bad.js)"></a>错误上报(bad.js)</h2><h3 id="为什么要上报"><a href="#为什么要上报" class="headerlink" title="为什么要上报"></a>为什么要上报</h3><p>防止出现问题时，能不能及时得知，方不方便排查<br>偏远地区CDN出现故障，导致页面空白<br>边界条件未验证导致错误<br>后台返回结果不符合预期导致错误<br>用户产生了不可预知的操作</p>
<h3 id="怎么捕获"><a href="#怎么捕获" class="headerlink" title="怎么捕获"></a>怎么捕获</h3><p>使用window.error捕获错误，可以将将msg,url,row行,col列，error错误等信息拿到<br>但以上信息不能确定是那个文件出了错误，<br>在firefox,chrome中的堆栈信息中可以根据上面的error找到是哪个文件出了错误<br>所以在上报之前根据堆栈信息找到文件再上报</p>
<h3 id="script-error"><a href="#script-error" class="headerlink" title="script error"></a>script error</h3><p>一般是文件跨域出现的错误<br>出现的场景和条件如下<br>通过window.onerror注册监听脚本错误事件<br>浏览器是firefox,chrome,safari,ie7+<br>页面内使用script标签引入非同域资源，且发生脚本错误<br>解决<br>1.设置cors<br>将跨域资源的response header的Access-Control-Allow-Origin设置为<em>或者本域，<br>(一般设为</em>，因为防止第三个域也来请求该文件时，本域请求完，response header有缓存，导致第三个域资源无法使用)<br>然后在script标签添加属性 crossorigin<br>2.对入口和异步方法全部用try-catch包裹，做到任何时刻错误都能捕获<br> setTimeout setInterval<br> 事件绑定<br> ajax callback<br> define require<br> 业务主入口<br><img src="/image/monitor.png" alt="monitor"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoohannah.github.io/post/performance/dnstime.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="YooHannah">
    <meta itemprop="description" content>
    <meta itemprop="image" content="/psb.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="My Little World">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="My Little World" src>
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/performance/dnstime.html" itemprop="url">
                  计算dns时间
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-17T11:42:37+08:00">
                2018-03-17
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="计算dns时间"><a href="#计算dns时间" class="headerlink" title="计算dns时间"></a>计算dns时间</h1><h2 id="H5之前-facebook提出的多普勒测速"><a href="#H5之前-facebook提出的多普勒测速" class="headerlink" title="H5之前 facebook提出的多普勒测速"></a>H5之前 facebook提出的多普勒测速</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">t1  http://a-doppler.facebook.com/test_pixel?HTTP1.0&amp;t=1&amp;size=0k</span><br><span class="line">t2  http://a-doppler.facebook.com/test_pixel?HTTP1.1&amp;t=2&amp;size=0k</span><br><span class="line">t3  http://a-doppler.facebook.com/test_pixel?HTTP1.1&amp;t=3&amp;size=0k</span><br><span class="line">t4  http://a-doppler.facebook.com/test_pixel?HTTP1.1&amp;t=4&amp;size=10k</span><br><span class="line"></span><br><span class="line">t1 = DNS + TCP/IP +RTT</span><br><span class="line">t2 = TCP/IP + RTT</span><br><span class="line">t3 = RTT</span><br><span class="line">10k /(t4–t3)~TCP bandwidth</span><br></pre></td></tr></table></figure>
<p>第一次请求使用HTTP1.0请求,保证后面的第二次请求可以重新建立TCP/IP链接<br>因为进行过第一请求，DNS已经在浏览器有缓存，所以进行第二次请求时直接在浏览器查找<br>所以t2-t1就是DNS查询时间</p>
<p>DNS = t1-t2;</p>
<p>第三次请求在第二次请求已经建立TCP/IP的情况下发起，所以</p>
<p>TCP/IP = t2-t3;</p>
<p>第四次请求只是在第三次基础上新增请求资源大小，利用这个大小，可以计算出大致贷款</p>
<p>bandwidth = 10k/(t4-t3)</p>
<h2 id="H5之后-performance-timing"><a href="#H5之后-performance-timing" class="headerlink" title="H5之后 performance.timing"></a>H5之后 performance.timing</h2><p>var time = window.performance.timing<br>DNStime = time.domainLookupEnd - time.domainLookupStart;</p>
<p>目前safari浏览器移动端均不支持,移动端Android不支持<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming" target="_blank" rel="noopener">performance.timing MDN</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoohannah.github.io/post/js/putjs.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="YooHannah">
    <meta itemprop="description" content>
    <meta itemprop="image" content="/psb.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="My Little World">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="My Little World" src>
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/js/putjs.html" itemprop="url">
                  为什么尽量将js放页面底部
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-17T11:35:37+08:00">
                2018-03-17
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="为什么尽量将js放页面底部"><a href="#为什么尽量将js放页面底部" class="headerlink" title="为什么尽量将js放页面底部"></a>为什么尽量将js放页面底部</h1><p>1,js是单线程的，一个时间只能干一件事<br>2.浏览器是多线程的,一个时候可以并行干多件事<br>3.一个浏览器打开一个页面，就是一个js线程<br>4.浏览器的多线线程一般会有：js引擎线程，界面渲染UI线程，浏览器事件触发线程，http请求线程等<br>5.当我们打开一个页面时，浏览器渲染html文件是从上往下渲染的，<br>UI引擎会根据html文件里面图片，css等的书写先后顺序依次去download,通过http请求拿到资源即加载结束<br>但如果碰到js文件，会将js文件先加载，加载结束后通知js引擎线程去执行<br>6.一旦js文件里面需要请求大量数据或者有对页面DOM的操作，就会造成页面空白或者由于DOM还没有加载完直接报错<br>7.为避免这样的情况,所以尽量将js放页面底部</p>
<h2 id="哪些js可以不放在底部"><a href="#哪些js可以不放在底部" class="headerlink" title="哪些js可以不放在底部"></a>哪些js可以不放在底部</h2><p>1.操作在document.ready之后执行的<br>2.处理兼容性的文件，例如早期IE兼容H5新增标签的支持文件html5shiv<br>3.jquery类库，通常引用CDN地址，经压缩后不会很大，而且很大几率已被用户缓存下来</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoohannah.github.io/post/js/rule.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="YooHannah">
    <meta itemprop="description" content>
    <meta itemprop="image" content="/psb.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="My Little World">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="My Little World" src>
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/js/rule.html" itemprop="url">
                  四种规范
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-21T21:43:15+08:00">
                2018-01-21
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="common-js-规范"><a href="#common-js-规范" class="headerlink" title="common.js 规范"></a>common.js 规范</h1><p>node.js的模块编程规范，适用于服务端，不能在浏览器使用<br>涉及到四个环境变量<br>module,exports,require,global<br>同步加载<br>require()引入<br>module.exports() 输出</p>
<h1 id="AMD规范-require-js"><a href="#AMD规范-require-js" class="headerlink" title="AMD规范(require.js)"></a>AMD规范(require.js)</h1><p>依赖在服务端，异步加载，提前加载所需模块<br>require([module], callback); 引入，等待所有依赖模块加载完后再执行回调函数<br>define() 输出return的内容</p>
<h1 id="CMD规范（sea-js"><a href="#CMD规范（sea-js" class="headerlink" title="CMD规范（sea.js)"></a>CMD规范（sea.js)</h1><p>可异步加载，按需加载，不用提前加载<br>define 定义<br>export 输出<br>require 引入</p>
<h1 id="es6规范"><a href="#es6规范" class="headerlink" title="es6规范"></a>es6规范</h1><p>使用import 引入模块，需要bable转成require，浏览器才能运行<br>使用export 输出</p>
<p><a href="https://www.imooc.com/article/20057#" target="_blank" rel="noopener">链接</a><br><a href="https://segmentfault.com/a/1190000010913832" target="_blank" rel="noopener">相关</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoohannah.github.io/post/knowledge/render.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="YooHannah">
    <meta itemprop="description" content>
    <meta itemprop="image" content="/psb.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="My Little World">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="My Little World" src>
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/knowledge/render.html" itemprop="url">
                  各种框架框架的数据绑定机制
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-21T21:30:15+08:00">
                2018-01-21
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="angular-js"><a href="#angular-js" class="headerlink" title="angular js"></a>angular js</h1><p>脏检查机制</p>
<h1 id="react"><a href="#react" class="headerlink" title="react"></a>react</h1><p>虚拟DOM:react 在初始化的时候会render一颗dom树，当state/props发生改变的时候，render函数会再渲染出另外一棵树与之前的dom树进行对比，新渲染的树就是虚拟dom树<br>diff 算法:比较dom树时的算法，</p>
<p>只会对同层节点进行比较；<br>父节点不同,不会再去比较子节点；</p>
<p>同层比较时，遇到结点类型不同,比如结点顺序发生变化时<br>没有key属性的时候，自己以及自己以后的结点都会被删除,重新建；删除时，会卸载删除的结点以及以后的结点，再新建以后的结点<br>如果有key的话，则只会新增插入的结点，卸载被替换的结点 其他结点则只是update,不受影响；删除的话，只卸载删除的结点</p>
<p>遇到结点类型相同，<br>要去比较属性是否相同，如果不同，则只替换属性,只进行update</p>
<p>性能优化：避免不必要渲染<br>使用shouldComponentUpdate(),当这个方法返回true的时候，需要重新渲染，false的时候不需要（默认是true).<br>使用PureComponent组件，它会自动浅对比props/state，当两者相同的时候不渲染节点。<br>PureComponent只会浅比较，所以不适合用于深层嵌套的对象。<br>同时，PureComponent不仅仅会跳过自己的重新渲染，还会跳过它所有子节点的，所以要注意，用它的时候是最好没有子节点并且不依赖于global state的展示型组件。<br><img src="/image/reactlife.png" alt="reactlife"></p>
<h1 id="vue1-0"><a href="#vue1-0" class="headerlink" title="vue1.0"></a>vue1.0</h1><p>单检查</p>
<h1 id="vue2-0"><a href="#vue2-0" class="headerlink" title="vue2.0"></a>vue2.0</h1><p>虚拟DOM和diff算法</p>
<p><img src="/image/vuelife.png" alt="vuelife"></p>
<h1 id="检测数据变更的4中方法"><a href="#检测数据变更的4中方法" class="headerlink" title="检测数据变更的4中方法"></a>检测数据变更的4中方法</h1><p>手动触发绑定<br>脏检查机制<br>数据对象劫持,使用Object.defineProperty<br>使用proxy</p>
<h1 id="三大框架对比"><a href="#三大框架对比" class="headerlink" title="三大框架对比"></a>三大框架对比</h1><p>1.数据检查更新原理不同<br>angularjs用脏检查<br>vue和react 使用diff算法<br>后两者效率更高</p>
<p>2.构建组件使用来说<br>angularjs更需要遵守框架规则，相对比较严谨<br>而vue次之，具备自己的响应式机制，所以要遵循一定的规则<br>最开放的是react,可以从更底层去定义自己想要的组件，<br>也可能跟react定位有关，一个用于构建UI的js库<br>它是一个库<br>库和框架的区别就是<br>库是，你调用库，作为开发者你有主动权<br>框架是你被框架调用，作为开发者你要听框架的<br>缺点就是数据改变自己要写监听逻辑</p>
<p>3.从使用场景上<br>angularjs和react都比较适合应用于大型网站开发<br>而vue小巧轻便，适合小项目开发</p>
<p>4.从学习成本上<br>vue最低，从用人角度来说最好找人<br>然后由于angular的规范严谨，导致需要学习的文档较多，<br>学习成本显而易见<br>react的开发角度相对以上两个框架更加向下，<br>有点像写早期模板语言，加上JSX语言的引入，<br>所以学习成本自然也是不低的</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoohannah.github.io/post/performance/template.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="YooHannah">
    <meta itemprop="description" content>
    <meta itemprop="image" content="/psb.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="My Little World">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="My Little World" src>
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/performance/template.html" itemprop="url">
                  模板引擎前后端优缺点
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-04T23:03:15+08:00">
                2018-01-04
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>模板引擎在后端<br>优点<br>在第一次请求时不需要发送请求数据的的HTTP，加载速度可能会快一些；<br>利于SEO;</p>
<p>缺点<br>前端模板有改动，后端对应的模板页面也要改动；<br>如果页面有复杂JS，前端因为没有数据不方便调试，后端需要使用js进行修改；<br>服务器负载压力大</p>
<p>模板引擎在前端<br>优点<br>前后端分离，后台只需要处理逻辑业务,提供接口，减少服务端压力;<br>前端修改方便；<br>可跨平台，兼容不同后端技术</p>
<p>缺点<br>不利于SEO（搜索引擎无法抓取页面的数据，因为只是模板，没有数据内容）<br>JS有可能被用户禁用，数据安全性低</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoohannah.github.io/post/angular/ngsrc.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="YooHannah">
    <meta itemprop="description" content>
    <meta itemprop="image" content="/psb.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="My Little World">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="My Little World" src>
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/angular/ngsrc.html" itemprop="url">
                  ng-src
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-04T22:47:15+08:00">
                2018-01-04
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ng-src"><a href="#ng-src" class="headerlink" title="ng-src"></a>ng-src</h1><p>img 里面使用src=”{ { } }“会在页面一开始加载模板的时候，不会执行{ { } }，直接去请求资源，造成404错误<br>如果使用ng-src = “{ { } }“就会避免以上问题，ng-src会先去执行{ { } },得到资源地址后再去请求资源<br>ng-src 指令确保的 AngularJS 代码执行前不显示图片。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoohannah.github.io/post/performance/cache/serviceworker.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="YooHannah">
    <meta itemprop="description" content>
    <meta itemprop="image" content="/psb.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="My Little World">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="My Little World" src>
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/performance/cache/serviceworker.html" itemprop="url">
                  service worker
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-03T22:52:15+08:00">
                2018-01-03
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前端与后台代理服务器</p>
<h2 id="主要方法"><a href="#主要方法" class="headerlink" title="主要方法"></a>主要方法</h2><p>fetch 事件/方法:service worker向后台发起HTTP请求的方法<br>fetch(url).then()</p>
<p>message事件/方法:页面和service worker之间进行通信的方法;同一页面两个窗口之间通信（web worker线程)<br>postMessage发送消息;message接收消息</p>
<p>caches API:处理缓存</p>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p>注册 register<br>安装 install<br>激活 activation<br>更新 Update<br>service-worker.js文件更新被浏览器发现后，会进入waitting等待状态，当前页面依旧使用旧文件进行work，<br>直到当前页面关闭，旧版本文件的service worker才会被kill掉，新版本文件的service worker开始接管页面的缓存资源<br>新的service worker一开始接管就会触发activate事件，从而可以做一些上次老版本缓存的工作</p>
<p>缓存的文件发生更新，可以在fetch 的时候，一边检查更新从而更新缓存，一边检查缓存然后fetch新资源给浏览器，<br>通过 promise 的 resolve 特性来决定谁快</p>
<h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><p>（https环境）<br>后台消息传递<br>网络代理，转发请求，伪造响应<br>离线缓存<br>消息推送</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">//在项目入口/配置js文件 进行注册</span><br><span class="line">if (navigator.serviceWorker) &#123;</span><br><span class="line">    navigator.serviceWorker.register(&apos;service-worker.js&apos;).then(function(registration) &#123;</span><br><span class="line">        console.log(&apos;service worker 注册成功&apos;);</span><br><span class="line">    &#125;).catch(function (err) &#123;</span><br><span class="line">        console.log(&apos;servcie worker 注册失败&apos;)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//service-worker.js 放在项目根目录下,service worker的执行代码</span><br><span class="line">var cacheFiles = [ //指定缓存的文件</span><br><span class="line">    &apos;about.js&apos;,</span><br><span class="line">    &apos;blog.js&apos;</span><br><span class="line">];</span><br><span class="line">self.addEventListener(&apos;install&apos;, function (evt) &#123; //在安装的时候就将指定文件存入cache storage中</span><br><span class="line">    evt.waitUntil(</span><br><span class="line">        caches.open(&apos;my-test-cahce-v1&apos;).then(function (cache) &#123; //使用caches api进行缓存操作</span><br><span class="line">            return cache.addAll(cacheFiles);</span><br><span class="line">        &#125;)</span><br><span class="line">    );</span><br><span class="line">&#125;);</span><br><span class="line">//页面fetch 资源时进行过滤</span><br><span class="line">self.addEventListener(&apos;fetch&apos;, function(event) &#123;</span><br><span class="line">  event.respondWith(</span><br><span class="line">    caches.match(event.request) //检查缓存是否有资源</span><br><span class="line">      .then(function(response) &#123;</span><br><span class="line">        if (response) &#123; //如果有直接返回</span><br><span class="line">          return response;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // 因为 event.request 流已经在 caches.match 中使用过一次，</span><br><span class="line">        // 那么该流是不能再次使用的。我们只能得到它的副本，拿去使用。</span><br><span class="line">        var fetchRequest = event.request.clone();</span><br><span class="line"></span><br><span class="line">        // fetch 的通过信方式，得到 Request 对象，然后发送请求</span><br><span class="line">        return fetch(fetchRequest).then(</span><br><span class="line">          function(response) &#123;</span><br><span class="line">            // 检查是否成功</span><br><span class="line">            if(!response || response.status !== 200 || response.type !== &apos;basic&apos;) &#123;</span><br><span class="line">              return response;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // 如果成功，该 response 一是要拿给浏览器渲染，而是要进行缓存。</span><br><span class="line">            // 由于 caches.put 使用的是文件的响应流，一旦使用，</span><br><span class="line">            // 那么返回的 response 就无法访问造成失败，所以，这里需要复制一份。</span><br><span class="line">            var responseToCache = response.clone();</span><br><span class="line"></span><br><span class="line">            caches.open(CACHE_NAME)</span><br><span class="line">              .then(function(cache) &#123;</span><br><span class="line">                cache.put(event.request, responseToCache);</span><br><span class="line">              &#125;);</span><br><span class="line"></span><br><span class="line">            return response;</span><br><span class="line">          &#125;</span><br><span class="line">        );</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//service-worker.js文件更新删除之前版本文件缓存的资源</span><br><span class="line"></span><br><span class="line">self.addEventListener(&apos;activate&apos;, function(event) &#123;</span><br><span class="line"></span><br><span class="line">  var cacheWhitelist = [&apos;v1&apos;];</span><br><span class="line"></span><br><span class="line">  event.waitUntil(</span><br><span class="line">  // 遍历 caches 里所有缓存的 keys 值</span><br><span class="line">    caches.keys().then(function(cacheNames) &#123;</span><br><span class="line">      return Promise.all(</span><br><span class="line">        cacheNames.map(function(cacheName) &#123;</span><br><span class="line">          if (cacheWhitelist.includes(cacheName)) &#123;</span><br><span class="line">          // 删除 v1 版本缓存的文件</span><br><span class="line">            return caches.delete(cacheName);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      );</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><a href="https://segmentfault.com/a/1190000008050742" target="_blank" rel="noopener">相关文档</a><br><a href="https://www.villainhr.com/page/2016/09/25/%E5%89%8D%E7%AB%AF%20fetch%20%E9%80%9A%E4%BF%A1" target="_blank" rel="noopener">fetch 通信</a><br><a href="https://www.villainhr.com/page/2016/08/22/Web%20Worker" target="_blank" rel="noopener">web worker 语法</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API" target="_blank" rel="noopener">Service Worker API</a></p>
<p>遗留问题：fetch通信headers添加token字段,不生效</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoohannah.github.io/post/test/fiddler.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="YooHannah">
    <meta itemprop="description" content>
    <meta itemprop="image" content="/psb.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="My Little World">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="My Little World" src>
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/test/fiddler.html" itemprop="url">
                  调试
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-03T22:47:15+08:00">
                2018-01-03
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="fiddler-使用"><a href="#fiddler-使用" class="headerlink" title="fiddler 使用"></a>fiddler 使用</h1><p>浏览器向服务器发送请求的拦截器</p>
<h2 id="statistic"><a href="#statistic" class="headerlink" title="statistic"></a>statistic</h2><p>查看一次请求各阶段所发生的时间，HTTP performance<br><img src="/image/fiddler5.png" alt="fiddler5"></p>
<h1 id="Inspectors"><a href="#Inspectors" class="headerlink" title="Inspectors"></a>Inspectors</h1><p>查看报文，上半部分是request,下半部分是response<br><img src="/image/fiddler4.png" alt="fiddler4"></p>
<h2 id="AutoResponder"><a href="#AutoResponder" class="headerlink" title="AutoResponder"></a>AutoResponder</h2><p>拦截本来要发给真正服务器的指定请求,将本地资源作为response返回去<br><img src="/image/fiddler3.png" alt="fiddler3"><br>1.开启规则<br>2.添加规则<br>3.指定请求，若以EXACT：开头，要写完整的请求路径;模糊匹配的话就不要写EXACT：<br>4.指定作为response的本地路径资源地址<br>5.确认规则配置完毕</p>
<h2 id="composer"><a href="#composer" class="headerlink" title="composer"></a>composer</h2><p>自己创建request 向服务器发送请求<br><img src="/image/fiddler2.png" alt="fiddler2"><br>配置好request后，点击excute按钮手动向服务器发送请求</p>
<h2 id="Filters"><a href="#Filters" class="headerlink" title="Filters"></a>Filters</h2><p>只拦截指定的请求,其他请求不拦截，指定多个时用逗号隔开<br><img src="/image/fiddler1.png" alt="fiddler1"><br>填写指定请求时，编辑框为黄色，为未保存状态，点击右上角‘Changes not yet saved’确认配置完毕</p>
<h1 id="谷歌浏览器调试常用"><a href="#谷歌浏览器调试常用" class="headerlink" title="谷歌浏览器调试常用"></a>谷歌浏览器调试常用</h1><h2 id="将respose进行json格式转换"><a href="#将respose进行json格式转换" class="headerlink" title="将respose进行json格式转换"></a>将respose进行json格式转换</h2><p>1.右键接口选择copy-&gt;copy response;<br>2.在console界面执行copy()函数<br>copy(   ctrl+v    )   回车<br>3.打开编辑器，新建一个文件，ctrl+v,就得到response 的json格式<br><img src="/image/debug1.gif" alt="debug1"></p>
<h2 id="console使用"><a href="#console使用" class="headerlink" title="console使用"></a>console使用</h2><ol>
<li><p>console.table(obj):将json数据以表格形式展示在控制台<br>例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var animals = [</span><br><span class="line">    &#123; animal: &apos;Horse&apos;, name: &apos;Henry&apos;, age: 43 &#125;,</span><br><span class="line">    &#123; animal: &apos;Dog&apos;, name: &apos;Fred&apos;, age: 13 &#125;,</span><br><span class="line">    &#123; animal: &apos;Cat&apos;, name: &apos;Frodo&apos;, age: 18 &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">console.table(animals);</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 console.time() 和 console.timeEnd() 对循环做基准测试<br>例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">console.time(&apos;Timer1&apos;);</span><br><span class="line"></span><br><span class="line">var items = [];</span><br><span class="line"></span><br><span class="line">for(var i = 0; i &lt; 100000; i++)&#123;</span><br><span class="line">   items.push(&#123;index: i&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.timeEnd(&apos;Timer1&apos;);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>最后会得到循环所用时间<br>Timer1：xxxxx ms</p>
<ol start="3">
<li>使用console.trace 跟踪调用栈<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">var car;</span><br><span class="line">var func1 = function() &#123;</span><br><span class="line">	func2();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var func2 = function() &#123;</span><br><span class="line">	func4();</span><br><span class="line">&#125;</span><br><span class="line">var func3 = function() &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var func4 = function() &#123;</span><br><span class="line">	car = new Car();</span><br><span class="line">	car.funcX();</span><br><span class="line">&#125;</span><br><span class="line">var Car = function() &#123;</span><br><span class="line">	this.brand = &apos;volvo&apos;;</span><br><span class="line">	this.color = &apos;red&apos;;</span><br><span class="line">	this.funcX = function() &#123;</span><br><span class="line">		this.funcY();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	this.funcY = function() &#123;</span><br><span class="line">		this.funcZ();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	this.funcZ = function() &#123;</span><br><span class="line">		console.trace(&apos;trace car&apos;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">func1();</span><br><span class="line">结果如下：</span><br><span class="line">trace car</span><br><span class="line">Car.funcZ @ VM524:28</span><br><span class="line">Car.funcY @ VM524:24</span><br><span class="line">Car.funcX @ VM524:20</span><br><span class="line">func4 @ VM524:14</span><br><span class="line">func2 @ VM524:7</span><br><span class="line">func1 @ VM524:3</span><br><span class="line">(anonymous) @ VM524:31</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="调试js"><a href="#调试js" class="headerlink" title="调试js"></a>调试js</h2><p>在当前页面的js里面修改或添加代码后，ctrl+s 然后在页面触发更改的代码，即可进行调试<br>但要注意需要刷新才能执行到的代码，不能用这种方式进行调试</p>
<h2 id="断点"><a href="#断点" class="headerlink" title="断点"></a>断点</h2><p>直接在代码序号上进行点击即添加了断点<br>取消断点就再点击断点<br>退出断点调试就点右上角<br><img src="/image/debug2.png" alt="debug2"><br>禁用断点<br><img src="/image/debug3.png" alt="debug3"><br>如果想知道当前断点上的变量值，只需要将鼠标放在变量上即可<br><a href="https://www.zybuluo.com/lxjwlt/note/434612" target="_blank" rel="noopener">相关链接</a><br><a href="http://www.cnblogs.com/Wayou/p/chrome-console-tips-and-tricks.html" target="_blank" rel="noopener">相关链接</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/12/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><span class="page-number current">13</span><a class="page-number" href="/page/14/">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" href="/page/14/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/psb.jpg" alt="YooHannah">
          <p class="site-author-name" itemprop="name">YooHannah</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">240</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">YooHannah</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/treedocument/treedocument.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	




  
  

  

  

  

  


</body>
</html>

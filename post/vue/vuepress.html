<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css">


  <meta name="keywords" content="vue,">





  <link rel="alternate" href="/atom.xml" title="My Little World" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0">






<meta name="description" content="背景面向普通用户的应用系统，包含很多产品的使用说明，属于静态页面一方面占据整体项目的体积，打包时间用时长，打包结果体积大另一方面，不断新增的不同产品的使用说明，对于前端开发人员来说，相对开发真正的产品功能来说优先级较低，且占用开发时间 所以希望将产品使用说明与当前项目隔离，建立静态网站，存放使用说明再由原系统进行跳转将新增使用说明的任务交由相关产品负责人等非开发人员进行新增 问题1.对于非开发人员">
<meta name="keywords" content="vue">
<meta property="og:type" content="article">
<meta property="og:title" content="使用vuepress构建文档系统">
<meta property="og:url" content="http://yoohannah.github.io/post/vue/vuepress.html">
<meta property="og:site_name" content="My Little World">
<meta property="og:description" content="背景面向普通用户的应用系统，包含很多产品的使用说明，属于静态页面一方面占据整体项目的体积，打包时间用时长，打包结果体积大另一方面，不断新增的不同产品的使用说明，对于前端开发人员来说，相对开发真正的产品功能来说优先级较低，且占用开发时间 所以希望将产品使用说明与当前项目隔离，建立静态网站，存放使用说明再由原系统进行跳转将新增使用说明的任务交由相关产品负责人等非开发人员进行新增 问题1.对于非开发人员">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoohannah.github.io/image/vscode.png">
<meta property="og:updated_time" content="2024-09-01T03:26:27.610Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="使用vuepress构建文档系统">
<meta name="twitter:description" content="背景面向普通用户的应用系统，包含很多产品的使用说明，属于静态页面一方面占据整体项目的体积，打包时间用时长，打包结果体积大另一方面，不断新增的不同产品的使用说明，对于前端开发人员来说，相对开发真正的产品功能来说优先级较低，且占用开发时间 所以希望将产品使用说明与当前项目隔离，建立静态网站，存放使用说明再由原系统进行跳转将新增使用说明的任务交由相关产品负责人等非开发人员进行新增 问题1.对于非开发人员">
<meta name="twitter:image" content="http://yoohannah.github.io/image/vscode.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoohannah.github.io/post/vue/vuepress.html">





  <title> 使用vuepress构建文档系统 | My Little World </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">My Little World</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">learn and share</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoohannah.github.io/post/vue/vuepress.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="YooHannah">
    <meta itemprop="description" content>
    <meta itemprop="image" content="/psb.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="My Little World">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="My Little World" src>
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                使用vuepress构建文档系统
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-24T13:18:15+08:00">
                2020-03-24
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>面向普通用户的应用系统，包含很多产品的使用说明，属于静态页面<br>一方面占据整体项目的体积，打包时间用时长，打包结果体积大<br>另一方面，不断新增的不同产品的使用说明，对于前端开发人员来说，<br>相对开发真正的产品功能来说优先级较低，且占用开发时间</p>
<p>所以希望将产品使用说明与当前项目隔离，建立静态网站，存放使用说明<br>再由原系统进行跳转<br>将新增使用说明的任务交由相关产品负责人等非开发人员进行新增</p>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>1.对于非开发人员来说，选择何种文档格式，可以既方便编写，又可以轻松转成html<br>2.原有系统用vue编写的批量文件如何迁移到新的静态网站</p>
<h1 id="知识"><a href="#知识" class="headerlink" title="知识"></a>知识</h1><h2 id="vuepress"><a href="#vuepress" class="headerlink" title="vuepress"></a>vuepress</h2><p>vuepress是一款使用vue驱动的静态网站生成器<br>用户可以使用markdown格式文件编辑文本，然后转义成html<br>另外页面中功能还可以使用vue进行嵌入</p>
<h2 id="批量迁移"><a href="#批量迁移" class="headerlink" title="批量迁移"></a>批量迁移</h2><p>原系统vue编写的批量页面含有vue语法，不能直接迁移<br>所以需要将生成好的html爬下来转成md文件，应用到新系统<br>‘html-to-md’的npm 包可以帮助将html转换成md</p>
<h1 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h1><h2 id="vuepress搭建"><a href="#vuepress搭建" class="headerlink" title="vuepress搭建"></a>vuepress搭建</h2><p>因为要与原系统主题风格样式类似，故需要在原来主题代码上进行修改<br>安装好vuepress包之后<br>将包里面的默认主题@vuepress/theme-default复制粘贴到doc/.vuepress/theme文件夹下面<br>修改里面的代码就可以直接应用了</p>
<h3 id="配置config-js文件"><a href="#配置config-js文件" class="headerlink" title="配置config.js文件"></a>配置config.js文件</h3><p>在.vuepress文件夹下新增config.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">title:标签页名称</span><br><span class="line">head:在页面头部引入的文件</span><br><span class="line">base:当不在域名根目录下部署时，配置部署路径</span><br><span class="line">themeConfig:&#123; 主题配置</span><br><span class="line">  logo：标题栏左上角logo</span><br><span class="line">  nav:右上角搜索后面的按钮</span><br><span class="line">  sidebar:左侧侧边栏</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="enhanceApp-js"><a href="#enhanceApp-js" class="headerlink" title="enhanceApp.js"></a>enhanceApp.js</h3><p>在.vuepress文件夹下新增enhanceApp.js<br>该文件，可以添加对项目的额外处理<br>比如当前项目右上角三个按钮根据权限显示<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">export default (&#123;</span><br><span class="line">  Vue, // VUE构造函数对象</span><br><span class="line">  options, // vue实例选项</span><br><span class="line">  router, // 路由对象</span><br><span class="line">  siteData//配置的数据</span><br><span class="line">&#125;) =&gt; &#123;</span><br><span class="line">  async function getAuthorization()&#123;</span><br><span class="line">    if(location.hostname.includes(&apos;localhost&apos;))&#123;</span><br><span class="line">      return true</span><br><span class="line">    &#125;</span><br><span class="line">    let cookie_str = document.cookie</span><br><span class="line">    let cookie_parts = cookie_str.split(&apos;;&apos;)</span><br><span class="line">    let auths = []</span><br><span class="line">    cookie_parts.forEach(c=&gt;&#123;</span><br><span class="line">      if (c)&#123;</span><br><span class="line">        let kv = c.split(&apos;=&apos;)</span><br><span class="line">        let k = kv[0].trim()</span><br><span class="line">        let v = kv[1].trim()</span><br><span class="line">        if (k == &apos;_a&apos;)&#123;</span><br><span class="line">          auths.push(v)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    if(auths.length&lt;1)&#123;</span><br><span class="line">      return false</span><br><span class="line">    &#125;</span><br><span class="line">    for (var c of auths)&#123;</span><br><span class="line">      try &#123;</span><br><span class="line">        let response = await axios.get(location.origin + &apos;/api/v1/edit-user&apos;, &#123;headers: &#123;&apos;X-Auth-Token&apos;: c&#125;&#125;)</span><br><span class="line">        if(response.status &lt; 400)&#123;</span><br><span class="line">          return true</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; catch (err) &#123;</span><br><span class="line">        console.log(err)</span><br><span class="line">        return false</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  getAuthorization().then(flag=&gt;&#123;</span><br><span class="line">    let divs = document.getElementsByClassName(&apos;nav-item&apos;)</span><br><span class="line">    if(flag)&#123;</span><br><span class="line">      divs[1].style.display = &apos;none&apos;</span><br><span class="line">      divs[2].style.display = &apos;none&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="更改页面呈现样式"><a href="#更改页面呈现样式" class="headerlink" title="更改页面呈现样式"></a>更改页面呈现样式</h3><p>增加悬浮锚点定位<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">page.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;main class=&quot;page&quot;&gt;</span><br><span class="line">    &lt;div v-show=&quot;$page.headers &amp;&amp; isShowAncher &amp;&amp; $page.frontmatter.ancherShow&quot; class=&apos;ancherSection&apos;&gt;</span><br><span class="line">      &lt;template v-for=&quot;(item,i) in headers&quot;&gt;</span><br><span class="line">        &lt;div :key=&quot;i&quot;&gt;</span><br><span class="line">          &lt;a  @click=&quot;gotoAncher(item.slug)&quot;&gt;&#123;&#123;item.title&#125;&#125;&lt;/a&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;slot name=&quot;top&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Content class=&quot;theme-default-content&quot; /&gt;</span><br><span class="line">    &lt;PageEdit /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;PageNav v-bind=&quot;&#123; sidebarItems &#125;&quot; /&gt;</span><br><span class="line">  </span><br><span class="line">    &lt;slot name=&quot;bottom&quot; /&gt;</span><br><span class="line">  &lt;/main&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123; PageEdit, PageNav&#125;,</span><br><span class="line">  props: [&apos;sidebarItems&apos;],</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isShowAncher: false, //滚动过程控制悬浮锚点</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed:&#123;</span><br><span class="line">    headers:function()&#123;//计算锚点内容</span><br><span class="line">      let ancherLevel = this.$page.frontmatter.ancherLevel </span><br><span class="line">      let sidebarDepth = this.$page.frontmatter.sidebarDepth?this.$page.frontmatter.sidebarDepth:this.$themeConfig.sidebarDepth</span><br><span class="line">      let levelStr = ancherLevel?ancherLevel:(sidebarDepth&gt;1?&apos;h2,h3&apos;:&apos;h2&apos;)</span><br><span class="line">      if(ancherLevel &amp;&amp; !(/^(h2|h3|h2\,\s*\h3)$/ig.test(ancherLevel.trim())))&#123;</span><br><span class="line">        return []</span><br><span class="line">      &#125;</span><br><span class="line">      if(levelStr.includes(&apos;,&apos;))&#123;</span><br><span class="line">        return this.$page.headers &amp;&amp; groupHeaders(this.$page.headers).length&gt;0?this.$page.headers:[]</span><br><span class="line">      &#125;else&#123;</span><br><span class="line">        let level = +levelStr[1]</span><br><span class="line">        return this.$page.headers.filter(h =&gt; h.level === level)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  updated()&#123;</span><br><span class="line">    this.setPictureZoom()</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted () &#123;</span><br><span class="line">    let  handleScroll= ()=&gt;&#123;</span><br><span class="line">      let scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop // 滚动条偏移量</span><br><span class="line">      this.isShowAncher = !!scrollTop</span><br><span class="line">    &#125;</span><br><span class="line">    window.addEventListener(&apos;scroll&apos;,handleScroll,false)</span><br><span class="line">    this.setPictureZoom()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    //锚点定位</span><br><span class="line">    gotoAncher(ancher)&#123;</span><br><span class="line">      let el = document.getElementById(ancher)</span><br><span class="line">      let anchersHeight = document.getElementsByClassName(&apos;ancherSection&apos;)[0].clientHeight</span><br><span class="line">      window.scrollTo(&#123; </span><br><span class="line">          top: el.offsetTop-anchersHeight, </span><br><span class="line">          behavior: &quot;smooth&quot; </span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    //添加图片放大功能</span><br><span class="line">    setPictureZoom () &#123;</span><br><span class="line">      let img = document.querySelectorAll(&apos;p &gt; img&apos;)</span><br><span class="line">        for (let i = 0; i &lt; img.length; i++) &#123;</span><br><span class="line">            if (img[i]) &#123;</span><br><span class="line">                let a = document.createElement(&quot;a&quot;);</span><br><span class="line">                let parent = img[i].parentNode</span><br><span class="line">                parent.appendChild(a)</span><br><span class="line">                let src = img[i].getAttribute(&apos;src&apos;)</span><br><span class="line">                a.setAttribute(&apos;data-fancybox&apos;, &apos;&apos;)</span><br><span class="line">                a.setAttribute(&apos;href&apos;, src)</span><br><span class="line">                a.appendChild(img[i])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;stylus&quot;&gt;</span><br><span class="line">@require &apos;../styles/wrapper.styl&apos;</span><br><span class="line">.page</span><br><span class="line">  padding-bottom 2rem</span><br><span class="line">  display block</span><br><span class="line">.ancherSection</span><br><span class="line">  position: fixed</span><br><span class="line">  background-color: white</span><br><span class="line">  box-shadow: rgb(234, 229, 229) 0px 1px 2px;</span><br><span class="line">  top: 64px</span><br><span class="line">  min-height: 42px</span><br><span class="line">  width: calc(100% - 320px);</span><br><span class="line">  display flex</span><br><span class="line">  align-items center</span><br><span class="line">  justify-content left</span><br><span class="line">  flex-wrap: wrap;</span><br><span class="line">  padding: 10px 0px 0px;</span><br><span class="line">  z-index:2</span><br><span class="line">  div</span><br><span class="line">    margin-left 20px</span><br><span class="line">    margin-bottom: 10px;</span><br><span class="line">    a</span><br><span class="line">      color black</span><br><span class="line">      cursor pointer</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="更换图标"><a href="#更换图标" class="headerlink" title="更换图标"></a>更换图标</h3><p>在sidebarGroup.vue文件同级别新增arrow.svg图片，使用相对路径可插入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&apos;./arrow.svg&apos; v-if=&quot;collapsable&quot; :class=&quot;open ? &apos;down&apos; : &apos;&apos;&quot; style=&apos;width:20px&apos; /&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="批量迁移-1"><a href="#批量迁移-1" class="headerlink" title="批量迁移"></a>批量迁移</h2><h3 id="目录改造"><a href="#目录改造" class="headerlink" title="目录改造"></a>目录改造</h3><p>原有系统页面图片按照产品名命名文件夹，故先将整体文件结构进行改造<br>原来目录结构<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">--content</span><br><span class="line">  --a</span><br><span class="line">    --a1.png</span><br><span class="line">    --a2.png</span><br><span class="line">    ......省略若干</span><br><span class="line">    --a13.png</span><br><span class="line">  --b</span><br><span class="line">    --b1.png</span><br><span class="line">    --b2.png</span><br><span class="line">    ......省略若干</span><br><span class="line">    --b13.png</span><br></pre></td></tr></table></figure></p>
<p>改造成<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">--content</span><br><span class="line">  --a</span><br><span class="line">    --images</span><br><span class="line">        --a1.png</span><br><span class="line">        --a2.png</span><br><span class="line">        ......省略若干</span><br><span class="line">        --a13.png</span><br><span class="line">  --b</span><br><span class="line">    --images</span><br><span class="line">      --b1.png</span><br><span class="line">      --b2.png</span><br><span class="line">      ......省略若干</span><br><span class="line">      --b13.png</span><br></pre></td></tr></table></figure></p>
<p>就是在当前父文件夹下新增images文件夹，然后把图片移进去<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">var fs = require(&apos;fs&apos;);//引用文件系统模块</span><br><span class="line">function readFileList(path, filesList) &#123;</span><br><span class="line">  var files = fs.readdirSync(path);</span><br><span class="line">  files.forEach(function (itm) &#123;</span><br><span class="line">    var obj = &#123;&#125;;//定义一个对象存放文件的路径和名字</span><br><span class="line">    obj.path = path;//路径</span><br><span class="line">    obj.filename = itm//名字</span><br><span class="line">    filesList.push(obj);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">var getFiles = &#123;</span><br><span class="line">  //获取文件夹下的所有文件</span><br><span class="line">  getFileList: function (path) &#123;</span><br><span class="line">      var filesList = [];</span><br><span class="line">      readFileList(path, filesList);</span><br><span class="line">      return filesList;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">let files = getFiles.getFileList(&quot;./content/&quot;)  //拿到a,b这一级别文件</span><br><span class="line">for(let i=0;i&lt;files.length;i++)&#123;</span><br><span class="line">  let filepath = files[i].path+files[i].filename+&apos;/&apos; //拼接a,b路径</span><br><span class="line">  let images = getFiles.getFileList(filepath)  //拿到a,b下一级的文件，即所有图片</span><br><span class="line">  let imgpath = filepath+&apos;images&apos;</span><br><span class="line">  fs.mkdirSync(imgpath);//新建文件夹</span><br><span class="line">  for(let j = 0;j&lt;images.length;j++)&#123; //将图片移到新文件夹中</span><br><span class="line">    let oldpath = images[j].path+images[j].filename</span><br><span class="line">    let newpath = imgpath+&apos;/&apos;+images[j].filename</span><br><span class="line">    fs.rename(oldpath,newpath,function(err)&#123;</span><br><span class="line">      console.log(err)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="转义文件"><a href="#转义文件" class="headerlink" title="转义文件"></a>转义文件</h3><p>因为原项目为单页面文件，无法进行爬虫批量获取<br>最终实现也还是手动copy页面中dom,一个页面一个页面的copy<br>然后处理</p>
<p>安装转义包<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install html-to-md</span><br></pre></td></tr></table></figure></p>
<p>开始使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">const html2md=require(&apos;html-to-md&apos;)</span><br><span class="line">const fs = require(&apos;fs&apos;);</span><br><span class="line">//在页面中找到使用说明的dom,copy之后存放到temp.txt中</span><br><span class="line">//当做字符串被读取</span><br><span class="line">var contentText = fs.readFileSync(&apos;temp.txt&apos;,&apos;utf-8&apos;);</span><br><span class="line">let res = html2md(contentText)</span><br><span class="line">//匹配md的‘[]()’书写形式</span><br><span class="line">let reg1=/\[([\S ]*?)]\s?()\( *&lt;?([^\s&apos;&quot;]*?(?:\([\S]*?\)[\S]*?)?)&gt;?\s*(?:()([&apos;&quot;])(.*?)\5)? *\)/g</span><br><span class="line">//匹配md的‘![]()’书写形式</span><br><span class="line">let reg2 = /!\[([^\]]*?)][ \t]*()\([ \t]?&lt;?([\S]+?(?:\([\S]*?\)[\S]*?)?)&gt;?(?: =([*\d]+[A-Za-z%]&#123;0,4&#125;)x([*\d]+[A-Za-z%]&#123;0,4&#125;))?[ \t]*(?:([&quot;&apos;])([^&quot;]*?)\6)?[ \t]?\)/g</span><br><span class="line">//在每篇开头注入转义规则front matter</span><br><span class="line">res = &apos;---\nsidebarDepth: 2 \nancherShow: true \nancherLevel: h3 \n--- \n&apos; + res.replace(reg1,function(group,text)&#123; //html-to-md包转义结果将标题转移成没有连接但有连接名的书写形式[xxx](),所以这里将其替换成 md写法</span><br><span class="line">  return text?&apos;## &apos;+text:group</span><br><span class="line">&#125;).replace(reg2,function(...res)&#123; //将图片引用路径做统一处理</span><br><span class="line">  let arr =  res[3].slice(res[3].lastIndexOf(&apos;/&apos;)+1).split(&apos;.&apos;)</span><br><span class="line">  return &apos;![](./images/&apos;+arr[0]+&apos;.&apos;+arr[2]+&apos;)&apos;</span><br><span class="line">&#125;)</span><br><span class="line">//将处理后的文件写入相应的文件夹中的manual.md文件中，即生成md文件</span><br><span class="line">fs.writeFile(&quot;./content/xxxx/manual.md&quot;, res, function(err) &#123; </span><br><span class="line">  if(err) &#123;</span><br><span class="line">      return console.log(err);</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(&quot;The file was saved!&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>所以最终文件夹目录为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">--content</span><br><span class="line">  --a</span><br><span class="line">    --images</span><br><span class="line">    --manual.md</span><br><span class="line">  --b</span><br><span class="line">    --images</span><br><span class="line">    --manual.md</span><br></pre></td></tr></table></figure></p>
<p>现在将content目录下文件全都粘贴到docs文件夹下面，与.vuepres平级<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">--docs</span><br><span class="line">  --.vuepress</span><br><span class="line">  --a</span><br><span class="line">    --images</span><br><span class="line">    --manual.md</span><br><span class="line">  --b</span><br><span class="line">    --images</span><br><span class="line">    --manual.md</span><br></pre></td></tr></table></figure></p>
<p>就可以在.vuepress文件夹下面的config.js中配置sidebar了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> sidebar: [</span><br><span class="line">      &#123;</span><br><span class="line">        title: &apos;产品a&apos;,</span><br><span class="line">        collapsable: true,</span><br><span class="line">        children:[</span><br><span class="line">            [&apos;/a/manual.md&apos;, &apos;a操作手册&apos;],</span><br><span class="line">          ]</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>1.如何将公共开源的项目更契合的应用到公司级项目，对原项目的破坏是避免不了的，比如替换主题颜色，替换相关图标，以及为了新增一些原来项目中没有的功能，而去更改原有处理逻辑，所谓二次开发，实质上，可能应该叫破坏性开发，不遵循原来的使用规则，在原来基础上，造自己的规则</p>
<p>2.对于大批量重复性工作的处理，要学会使用工具，<br>比如局部大量替换，借助vscode的局部锁定（先选取范围再点击下图1，锁定按钮）<br>再比如规则类似的替换，又要善于利用vscode的正则匹配去替换，如下图2<br><img src="/image/vscode.png" alt="vscode"><br>如果属于大规模处理，还要学会自己造工具<br>比如上述批量处理目录结构，改造md文件<br>人之所以为人，学会使用工具才能算是进入了文明社会</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/vue/" rel="tag"># vue</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/post/knowledge/editionproblem.html" rel="next" title="一个发版问题">
                <i class="fa fa-chevron-left"></i> 一个发版问题
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/post/knowledge/sso.html" rel="prev" title="sso单点登录实现">
                sso单点登录实现 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/psb.jpg" alt="YooHannah">
          <p class="site-author-name" itemprop="name">YooHannah</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">261</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">23</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#背景"><span class="nav-number">1.</span> <span class="nav-text">背景</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#问题"><span class="nav-number">2.</span> <span class="nav-text">问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#知识"><span class="nav-number">3.</span> <span class="nav-text">知识</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#vuepress"><span class="nav-number">3.1.</span> <span class="nav-text">vuepress</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#批量迁移"><span class="nav-number">3.2.</span> <span class="nav-text">批量迁移</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#解决"><span class="nav-number">4.</span> <span class="nav-text">解决</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#vuepress搭建"><span class="nav-number">4.1.</span> <span class="nav-text">vuepress搭建</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#配置config-js文件"><span class="nav-number">4.1.1.</span> <span class="nav-text">配置config.js文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#enhanceApp-js"><span class="nav-number">4.1.2.</span> <span class="nav-text">enhanceApp.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更改页面呈现样式"><span class="nav-number">4.1.3.</span> <span class="nav-text">更改页面呈现样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更换图标"><span class="nav-number">4.1.4.</span> <span class="nav-text">更换图标</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#批量迁移-1"><span class="nav-number">4.2.</span> <span class="nav-text">批量迁移</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#目录改造"><span class="nav-number">4.2.1.</span> <span class="nav-text">目录改造</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#转义文件"><span class="nav-number">4.2.2.</span> <span class="nav-text">转义文件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#小结"><span class="nav-number">5.</span> <span class="nav-text">小结</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">YooHannah</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/treedocument/treedocument.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	




  
  

  

  

  

  


</body>
</html>

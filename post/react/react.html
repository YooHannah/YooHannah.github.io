<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css">


  <meta name="keywords" content="react,">





  <link rel="alternate" href="/atom.xml" title="My Little World" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0">






<meta name="description" content="react.jsæ˜¯ä¸€ä¸ªUIåº“,æŒ‰ç…§reactè§„åˆ™ï¼Œå¯ä»¥ç»„å»ºé¡µé¢é‡Œæ¯ä¸€å°å—çš„åŠŸèƒ½ï¼Œè¿™ç§å±€éƒ¨çš„åŠŸèƒ½å°±æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå„ç»„ä»¶ä¹‹é—´å¯ä»¥ç»„åˆã€åµŒå¥—ï¼Œä»è€Œæ‹¼æˆæ•´ä¸ªé¡µé¢reactå°±æ˜¯åœ¨ç»„å»ºå„ä¸ªå°½å¯èƒ½é€šç”¨çš„ç»„ä»¶ ç¯å¢ƒæ­å»ºç›´æ¥ä½¿ç”¨å®˜æ–¹å·¥å…· create-react-appnpm install -g create-react-app å®‰è£…å‘½ä»¤è¡Œcreate-react-app hello-react æ„å»ºå·¥ç¨‹cd he">
<meta name="keywords" content="react">
<meta property="og:type" content="article">
<meta property="og:title" content="react ç®€ç•¥å­¦ä¹ ç¬”è®°">
<meta property="og:url" content="http://yoohannah.github.io/post/react/react.html">
<meta property="og:site_name" content="My Little World">
<meta property="og:description" content="react.jsæ˜¯ä¸€ä¸ªUIåº“,æŒ‰ç…§reactè§„åˆ™ï¼Œå¯ä»¥ç»„å»ºé¡µé¢é‡Œæ¯ä¸€å°å—çš„åŠŸèƒ½ï¼Œè¿™ç§å±€éƒ¨çš„åŠŸèƒ½å°±æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå„ç»„ä»¶ä¹‹é—´å¯ä»¥ç»„åˆã€åµŒå¥—ï¼Œä»è€Œæ‹¼æˆæ•´ä¸ªé¡µé¢reactå°±æ˜¯åœ¨ç»„å»ºå„ä¸ªå°½å¯èƒ½é€šç”¨çš„ç»„ä»¶ ç¯å¢ƒæ­å»ºç›´æ¥ä½¿ç”¨å®˜æ–¹å·¥å…· create-react-appnpm install -g create-react-app å®‰è£…å‘½ä»¤è¡Œcreate-react-app hello-react æ„å»ºå·¥ç¨‹cd he">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2024-09-01T03:26:27.600Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="react ç®€ç•¥å­¦ä¹ ç¬”è®°">
<meta name="twitter:description" content="react.jsæ˜¯ä¸€ä¸ªUIåº“,æŒ‰ç…§reactè§„åˆ™ï¼Œå¯ä»¥ç»„å»ºé¡µé¢é‡Œæ¯ä¸€å°å—çš„åŠŸèƒ½ï¼Œè¿™ç§å±€éƒ¨çš„åŠŸèƒ½å°±æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå„ç»„ä»¶ä¹‹é—´å¯ä»¥ç»„åˆã€åµŒå¥—ï¼Œä»è€Œæ‹¼æˆæ•´ä¸ªé¡µé¢reactå°±æ˜¯åœ¨ç»„å»ºå„ä¸ªå°½å¯èƒ½é€šç”¨çš„ç»„ä»¶ ç¯å¢ƒæ­å»ºç›´æ¥ä½¿ç”¨å®˜æ–¹å·¥å…· create-react-appnpm install -g create-react-app å®‰è£…å‘½ä»¤è¡Œcreate-react-app hello-react æ„å»ºå·¥ç¨‹cd he">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoohannah.github.io/post/react/react.html">





  <title> react ç®€ç•¥å­¦ä¹ ç¬”è®° | My Little World </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">My Little World</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">learn and share</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            å…³äº
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoohannah.github.io/post/react/react.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="YooHannah">
    <meta itemprop="description" content>
    <meta itemprop="image" content="/psb.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="My Little World">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="My Little World" src>
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                react ç®€ç•¥å­¦ä¹ ç¬”è®°
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-09T06:37:02+08:00">
                2017-10-09
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>react.jsæ˜¯ä¸€ä¸ªUIåº“,æŒ‰ç…§reactè§„åˆ™ï¼Œå¯ä»¥ç»„å»ºé¡µé¢é‡Œæ¯ä¸€å°å—çš„åŠŸèƒ½ï¼Œè¿™ç§å±€éƒ¨çš„åŠŸèƒ½å°±æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œ<br>å„ç»„ä»¶ä¹‹é—´å¯ä»¥ç»„åˆã€åµŒå¥—ï¼Œä»è€Œæ‹¼æˆæ•´ä¸ªé¡µé¢<br>reactå°±æ˜¯åœ¨ç»„å»ºå„ä¸ªå°½å¯èƒ½é€šç”¨çš„ç»„ä»¶</p>
<h1 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h1><p>ç›´æ¥ä½¿ç”¨å®˜æ–¹å·¥å…· create-react-app<br>npm install -g create-react-app å®‰è£…å‘½ä»¤è¡Œ<br>create-react-app hello-react æ„å»ºå·¥ç¨‹<br>cd hello-react è¿›å…¥å·¥ç¨‹<br>npm start è¿è¡Œ<br>src/App.js å³æ˜¯ç¼–å†™ç»„ä»¶çš„æ–‡ä»¶<br>ä¸€ä¸ªç®€å•çš„ç»„ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos; //å†™ç»„ä»¶å¿…é¡»è¦å¼•å…¥çš„ä¾èµ–</span><br><span class="line">import ReactDOM from &apos;react-dom&apos; //æŠŠç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ä¸Šå»ï¼Œå°±æ˜¯æŠŠç»„ä»¶çš„htmlç»“æ„å½¢æˆé¡µé¢</span><br><span class="line">import &apos;./index.css&apos;</span><br><span class="line"></span><br><span class="line">class Header extends Component &#123;</span><br><span class="line">  render () &#123; //ç»„ä»¶å¿…é¡»è¦æœ‰çš„å‡½æ•°ï¼Œä¸”å¿…é¡»è¦è¿”å›JSX</span><br><span class="line">    return ( //è¿”å›JSXå†™çš„ç»„ä»¶å†…å®¹</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;React å°ä¹¦&lt;/h1&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ReactDOM.render åŠŸèƒ½å°±æ˜¯æŠŠç»„ä»¶æ¸²æŸ“å¹¶ä¸”æ„é€  DOM æ ‘ï¼Œç„¶åæ’å…¥åˆ°é¡µé¢ä¸ŠæŸä¸ªç‰¹å®šçš„å…ƒç´ ä¸Šï¼ˆåœ¨è¿™é‡Œæ˜¯ id ä¸º root çš„ div å…ƒç´ ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Header /&gt;,</span><br><span class="line">  document.getElementById(&apos;root&apos;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>åœ¨ç¼–å†™ React.js ç»„ä»¶çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½éœ€è¦ç»§æ‰¿ React.js çš„ Componentï¼ˆä¹Ÿæœ‰åˆ«çš„ç¼–å†™ç»„ä»¶çš„æ–¹å¼â€“&gt;å‡½æ•°å¼ç»„ä»¶ï¼‰ã€‚ä¸€ä¸ªç»„ä»¶ç±»å¿…é¡»è¦å®ç°ä¸€ä¸ª render æ–¹æ³•ï¼Œè¿™ä¸ª render æ–¹æ³•å¿…é¡»è¦è¿”å›ä¸€ä¸ª JSX å…ƒç´ ã€‚ä½†è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œ</p>
<p>å¿…é¡»è¦ç”¨ä¸€ä¸ªå¤–å±‚çš„ JSX å…ƒç´ æŠŠæ‰€æœ‰å†…å®¹åŒ…è£¹èµ·æ¥ã€‚è¿”å›å¹¶åˆ—å¤šä¸ª JSX å…ƒç´ æ˜¯ä¸å…è®¸çš„ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//ä¸å¯¹çš„</span><br><span class="line">return (</span><br><span class="line">      &lt;div&gt;ç¬¬ä¸€ä¸ª&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;ç¬¬äºŒä¸ª&lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">//å¯¹çš„</span><br><span class="line">return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div&gt;ç¬¬ä¸€ä¸ª&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;ç¬¬äºŒä¸ª&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br></pre></td></tr></table></figure></p>
<h1 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h1><p>å¯ä»¥æŠŠå®ƒçœ‹åšæ˜¯jsçš„ä¸€ç§æ•°æ®ç±»å‹ï¼Œé•¿å¾—å¾ˆåƒHTMLï¼Œä½†ä¸æ˜¯HTML,å¯ä»¥åƒhtmlé‚£æ ·å†™ï¼Œä½†æœ‰äº›åœ°æ–¹è¦æ³¨æ„</p>
<p>å¯åº”ç”¨{}æ’å…¥ä»»ä½•jsä»£ç ï¼Œ<br>å¦‚æœæ˜¯è¡¨è¾¾å¼å‡½æ•°ï¼Œåˆ™è¿”å›çš„ç»“æœä¼šç›¸åº”åœ°æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼Œå˜é‡åˆ™å°†å˜é‡å€¼å¯¹åº”æ¸²æŸ“</p>
<p>{}å†…å¦‚æœæ˜¯æ¡ä»¶è¡¨è¾¾å¼ï¼Œå³å¯ä»¥å®ç°ï¼Œæ ¹æ®ä¸åŒæ¡ä»¶è¿”å›ä¸åŒjsxå†…å®¹ï¼Œ<br>å¦‚æœåœ¨è¡¨è¾¾å¼æ’å…¥é‡Œé¢è¿”å› null ï¼Œé‚£ä¹ˆ React.js ä¼šä»€ä¹ˆéƒ½ä¸æ˜¾ç¤ºï¼Œç›¸å½“äºå¿½ç•¥äº†è¯¥è¡¨è¾¾å¼æ’å…¥ã€‚ç»“åˆæ¡ä»¶è¿”å›çš„è¯ï¼Œå°±åšåˆ°æ˜¾ç¤ºæˆ–è€…éšè—æŸäº›å…ƒç´ </p>
<p>å¯ä»¥åšå˜é‡çš„å€¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">render () &#123;</span><br><span class="line">  const isGoodWord = true</span><br><span class="line">  const goodWord = &lt;strong&gt; is good&lt;/strong&gt;</span><br><span class="line">  const badWord = &lt;span&gt; is not good&lt;/span&gt;</span><br><span class="line">  const title = &lt;h1 className=&apos;title&apos;&gt; ScriptOJ &lt;/h1&gt;</span><br><span class="line">  const page = &lt;div className= &apos;content&apos;&gt; &#123;title&#125; &lt;/div&gt; //pageé‡Œé¢ç”¨titleçš„å€¼ï¼Œå³ &lt;h1 className=&apos;title&apos;&gt; ScriptOJ &lt;/h1&gt;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;</span><br><span class="line">        React å°ä¹¦</span><br><span class="line">        &#123;isGoodWord ? goodWord : badWord&#125;</span><br><span class="line">      &lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç»™æ ‡ç­¾æ·»åŠ classæ—¶ï¼Œä¸èƒ½ç”¨class,è¦ç”¨className<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">render () &#123;</span><br><span class="line">  const className = &apos;header&apos;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className=&#123;className&#125;&gt;</span><br><span class="line">      &lt;h1&gt;React å°ä¹¦&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>forå±æ€§ä¸èƒ½ç”¨ï¼Œè¦ç”¨htmlforä»£æ›¿ï¼Œ<br>å…¶ä»–çš„ HTML å±æ€§ä¾‹å¦‚ style ã€data-* ç­‰å°±å¯ä»¥åƒæ™®é€šçš„ HTML å±æ€§é‚£æ ·ç›´æ¥æ·»åŠ ä¸Šå»ã€‚</p>
<h1 id="ç»„ä»¶æ ‘"><a href="#ç»„ä»¶æ ‘" class="headerlink" title="ç»„ä»¶æ ‘"></a>ç»„ä»¶æ ‘</h1><p>é€šè¿‡ç»§æ‰¿Componentå¯ä»¥è‡ªå®šä¹‰å½¢æˆå¤šä¸ªç±»,å³å½¢æˆå¤šä¸ªç»„ä»¶ï¼Œä½†è¿™äº›ç»„ä»¶åï¼Œ<br>æˆ–è€…è¯´ç±»åè¦ä½œä¸ºæ ‡ç­¾ä½¿ç”¨ï¼Œä¸ºä¸æ™®é€šå°å†™å­—æ¯å¼€å¤´çš„HTMLæ ‡ç­¾åšåŒºåˆ†ï¼Œä¸€å®šè¦ä»¥å¤§å†™å­—æ¯å¼€å¤´</p>
<p>è‡ªå®šä¹‰ç»„ä»¶ä»¥æ ‡ç­¾çš„å½¢å¼æ”¾å…¥å¦ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶çš„JSXä¸­ï¼Œå³å¯å®ç°åŒ…å«å…³ç³»<br>å¤šä¸ªè‡ªå®šä¹‰æ ‡ç­¾ç»„ä»¶å¹¶åˆ—æ”¾å…¥åŒä¸€ä¸ªJSXä¸­å³å®ç°å¹¶åˆ—å…³ç³»<br>ç»„ä»¶å¯ä»¥å’Œç»„ä»¶ç»„åˆåœ¨ä¸€èµ·ï¼Œç»„ä»¶å†…éƒ¨å¯ä»¥ä½¿ç”¨åˆ«çš„ç»„ä»¶ï¼Œå°±åƒæ™®é€šçš„ HTML æ ‡ç­¾ä¸€æ ·ä½¿ç”¨å°±å¯ä»¥<br>è¿™æ ·çš„ç»„åˆåµŒå¥—ï¼Œæœ€åæ„æˆä¸€ä¸ªæ‰€è°“çš„ç»„ä»¶æ ‘</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;;</span><br><span class="line">import ReactDOM from &apos;react-dom&apos;;</span><br><span class="line"></span><br><span class="line">class Title extends Component &#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;h1&gt;hello react&lt;/h1&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Header extends Component &#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Title /&gt; //headeré‡Œé¢åŒ…å«Title</span><br><span class="line">      &lt;h2&gt;This is Header&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Main extends Component &#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h2&gt;This is main content&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Footer extends Component &#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h2&gt;This is footer&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Index extends Component &#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt; //å¤šæ ‡ç­¾å¹¶åˆ—æ”¾ç½®ï¼Œç»„æˆé¡µé¢</span><br><span class="line">        &lt;Header /&gt;</span><br><span class="line">        &lt;Main /&gt;</span><br><span class="line">        &lt;Footer /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Index /&gt;,</span><br><span class="line">  document.getElementById(&apos;root&apos;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h1 id="äº‹ä»¶ç›‘å¬"><a href="#äº‹ä»¶ç›‘å¬" class="headerlink" title="äº‹ä»¶ç›‘å¬"></a>äº‹ä»¶ç›‘å¬</h1><p> React.js ä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨æµè§ˆå™¨åŸç”Ÿçš„ addEventListener è¿›è¡Œäº‹ä»¶ç›‘å¬ã€‚<br> React.js å°è£…å¥½äº†ä¸€ç³»åˆ—çš„ on<em> çš„å±æ€§ï¼Œå½“éœ€è¦ä¸ºæŸä¸ªå…ƒç´ ç›‘å¬æŸä¸ªäº‹ä»¶çš„æ—¶å€™ï¼Œåªéœ€è¦ç®€å•åœ°ç»™å®ƒåŠ ä¸Š on</em> å°±å¯ä»¥äº†ã€‚<br> è€Œä¸”ä¸éœ€è¦è€ƒè™‘ä¸åŒæµè§ˆå™¨å…¼å®¹æ€§çš„é—®é¢˜ï¼ŒReact.js éƒ½å°è£…å¥½äº†è¿™äº›ç»†èŠ‚ã€‚</p>
<p> ä½†æ˜¯è¦æ³¨æ„ï¼Œæ²¡æœ‰ç»è¿‡ç‰¹æ®Šå¤„ç†çš„è¯ï¼Œè¿™äº› on* çš„äº‹ä»¶ç›‘å¬åªèƒ½ç”¨åœ¨æ™®é€šçš„ HTML çš„æ ‡ç­¾ä¸Šï¼Œè€Œä¸èƒ½ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Š</p>
<p> React.js ä¼šç»™æ¯ä¸ªäº‹ä»¶ç›‘å¬ä¼ å…¥ä¸€ä¸ª event å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æä¾›çš„åŠŸèƒ½å’Œæµè§ˆå™¨æä¾›çš„åŠŸèƒ½ä¸€è‡´ï¼Œè€Œä¸”å®ƒæ˜¯å…¼å®¹æ‰€æœ‰æµè§ˆå™¨çš„ã€‚</p>
<p> React.js çš„äº‹ä»¶ç›‘å¬æ–¹æ³•éœ€è¦æ‰‹åŠ¨ bind åˆ°å½“å‰å®ä¾‹ï¼Œè¿™ç§æ¨¡å¼åœ¨ React.js ä¸­éå¸¸å¸¸ç”¨ã€‚ä¸ç„¶ç›‘å¬äº‹ä»¶è°ƒç”¨çš„æ–¹æ³•é‡Œé¢çš„thisæ˜¯undefined<br> å¦å¤–å¯ä»¥åœ¨bind çš„æ—¶å€™ä¼ å‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">class Title extends Component &#123;</span><br><span class="line"> handleClickOnTitle (e) &#123;</span><br><span class="line">    console.log(this)//undefined</span><br><span class="line">    console.log(e.target.innerHTML)//hello React</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;h1 onClick=&#123;this.handleClickOnTitle&#125;&gt;hello React&lt;/h1&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Title extends Component &#123;</span><br><span class="line"> handleClickOnTitle (word, e) &#123;</span><br><span class="line">    console.log(this, word)//Title å¯¹è±¡ï¼Œâ€œhelloâ€</span><br><span class="line">    console.log(e.target.innerHTML)//hello React</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;h1 onClick=&#123;this.handleClickOnTitle.bind(this, &apos;Hello&apos;)&#125;&gt;hello React &lt;/h1&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="setStateå‡½æ•°å’Œpros"><a href="#setStateå‡½æ•°å’Œpros" class="headerlink" title="setStateå‡½æ•°å’Œpros"></a>setStateå‡½æ•°å’Œpros</h1><p>ä¸€ä¸ªç»„ä»¶çš„æ˜¾ç¤ºå½¢æ€æ˜¯å¯ä»¥ç”±å®ƒæ•°æ®çŠ¶æ€(state)å’Œé…ç½®å‚æ•°(pros)å†³å®šçš„ï¼Œå³ä¸¤ç§æ–¹å¼æ§åˆ¶ç»„ä»¶æ˜¾ç¤ºå½¢æ€</p>
<h2 id="æ–¹å¼ä¸€ï¼šåˆ©ç”¨stateçš„å€¼-é€šè¿‡æ¸²æŸ“æ§åˆ¶æ˜¾ç¤ºçŠ¶æ€"><a href="#æ–¹å¼ä¸€ï¼šåˆ©ç”¨stateçš„å€¼-é€šè¿‡æ¸²æŸ“æ§åˆ¶æ˜¾ç¤ºçŠ¶æ€" class="headerlink" title="æ–¹å¼ä¸€ï¼šåˆ©ç”¨stateçš„å€¼,é€šè¿‡æ¸²æŸ“æ§åˆ¶æ˜¾ç¤ºçŠ¶æ€"></a>æ–¹å¼ä¸€ï¼šåˆ©ç”¨stateçš„å€¼,é€šè¿‡æ¸²æŸ“æ§åˆ¶æ˜¾ç¤ºçŠ¶æ€</h2><p>ä¸€ä¸ªç»„ä»¶å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€,React.js çš„ state ç”¨æ¥å­˜å‚¨è¿™ç§å¯å˜åŒ–çš„çŠ¶æ€,å†è®©setStateå‡½æ•°æ ¹æ®stateçš„å€¼é‡æ–°æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢<br>setState æ–¹æ³•ç”±çˆ¶ç±» Component æ‰€æä¾›ã€‚å½“è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼ŒReact.js ä¼šæ›´æ–°ç»„ä»¶çš„çŠ¶æ€ state ï¼Œå¹¶ä¸”é‡æ–°è°ƒç”¨ render æ–¹æ³•ï¼Œç„¶åå†æŠŠ render æ–¹æ³•æ‰€æ¸²æŸ“çš„æœ€æ–°çš„å†…å®¹æ˜¾ç¤ºåˆ°é¡µé¢ä¸Šã€‚<br>æ³¨æ„ï¼Œå½“è¦æ”¹å˜ç»„ä»¶çš„çŠ¶æ€çš„æ—¶å€™ï¼Œä¸èƒ½ç›´æ¥ç”¨ this.state = xxx è¿™ç§æ–¹å¼æ¥ä¿®æ”¹ï¼Œå¦‚æœè¿™æ ·åš React.js å°±æ²¡åŠæ³•çŸ¥é“ä½ ä¿®æ”¹äº†ç»„ä»¶çš„çŠ¶æ€ï¼Œå®ƒä¹Ÿå°±æ²¡æœ‰åŠæ³•æ›´æ–°é¡µé¢ã€‚æ‰€ä»¥ï¼Œä¸€å®šè¦ä½¿ç”¨ React.js æä¾›çš„ setState æ–¹æ³•ï¼Œå®ƒæ¥å—ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°ä½œä¸ºå‚æ•°ã€‚</p>
<p>ä¼ å…¥ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œè¿™ä¸ªå¯¹è±¡è¡¨ç¤ºè¯¥ç»„ä»¶çš„æ–°çŠ¶æ€ã€‚ä½†åªéœ€è¦ä¼ å…¥éœ€è¦æ›´æ–°çš„éƒ¨åˆ†å°±å¯ä»¥äº†ï¼Œè€Œä¸éœ€è¦ä¼ å…¥æ•´ä¸ªå¯¹è±¡<br>è¦æ³¨æ„çš„æ˜¯ï¼Œå½“è°ƒç”¨ setState çš„æ—¶å€™ï¼ŒReact.js å¹¶ä¸ä¼šé©¬ä¸Šä¿®æ”¹ stateã€‚è€Œæ˜¯æŠŠè¿™ä¸ªå¯¹è±¡æ”¾åˆ°ä¸€ä¸ªæ›´æ–°é˜Ÿåˆ—é‡Œé¢ï¼Œç¨åæ‰ä¼šä»é˜Ÿåˆ—å½“ä¸­æŠŠæ–°çš„çŠ¶æ€æå–å‡ºæ¥åˆå¹¶åˆ° state å½“ä¸­ï¼Œç„¶åå†è§¦å‘ç»„ä»¶æ›´æ–°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">handleClickOnLikeButton () &#123;</span><br><span class="line">    console.log(this.state.isLiked)</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      isLiked: !this.state.isLiked</span><br><span class="line">    &#125;)</span><br><span class="line">    console.log(this.state.isLiked) //ç¬¬äºŒæ¬¡æ‰“å°çš„å°±æ˜¯ç¬¬ä¸€æ¬¡æ‰“å°çš„å€¼</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœéœ€è¦å¤šæ¬¡setState,è€Œä¸”åç»­ä¼ å…¥å‚æ•°ä¾èµ–å‰ä¸€ä¸ªsetState å‚æ•°ï¼Œè¿™æ—¶å°±è¦ç”¨å‡½æ•°åšsetStateå‚æ•°ï¼Œ<br>React.js ä¼šæŠŠä¸Šä¸€ä¸ª setState çš„ç»“æœä¼ å…¥è¿™ä¸ªå‡½æ•°ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨è¯¥ç»“æœè¿›è¡Œè¿ç®—ã€æ“ä½œï¼Œç„¶åè¿”å›ä¸€ä¸ªå¯¹è±¡ä½œä¸ºæ›´æ–° state çš„å¯¹è±¡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">handleClickOnLikeButton () &#123;</span><br><span class="line"></span><br><span class="line">    // this.setState(&#123; count: 0 &#125;) // =&gt; this.state.count è¿˜æ˜¯ undefined</span><br><span class="line">    // this.setState(&#123; count: this.state.count + 1&#125;) // =&gt; undefined + 1 = NaN</span><br><span class="line">    // this.setState(&#123; count: this.state.count + 2&#125;) //æœ€ç»ˆç»“æœä¸ºNAN</span><br><span class="line"></span><br><span class="line">    this.setState((prevState) =&gt; &#123;</span><br><span class="line">      return &#123; count: 0 &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    this.setState((prevState) =&gt; &#123;</span><br><span class="line">      return &#123; count: prevState.count + 1 &#125; // ä¸Šä¸€ä¸ª setState çš„è¿”å›æ˜¯ count ä¸º 0ï¼Œå½“å‰è¿”å› 1</span><br><span class="line">    &#125;)</span><br><span class="line">    this.setState((prevState) =&gt; &#123;</span><br><span class="line">      return &#123; count: prevState.count + 2 &#125; // ä¸Šä¸€ä¸ª setState çš„è¿”å›æ˜¯ count ä¸º 1ï¼Œå½“å‰è¿”å› 3</span><br><span class="line">    &#125;)</span><br><span class="line">    // æœ€åçš„ç»“æœæ˜¯ this.state.count ä¸º 3ï¼Œæ‰€ä»¥å¦‚æœJSXä¸­å¦‚æœæ˜¾ç¤ºcount,åˆ™æ˜¾ç¤º3</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p>å¤šæ¬¡è°ƒç”¨setStateåªä¼šè¿”å›å¤šæ¬¡è¿è¡Œåçš„ç»“æœï¼ŒReact.js å†…éƒ¨ä¼šæŠŠ JavaScript äº‹ä»¶å¾ªç¯ä¸­çš„æ¶ˆæ¯é˜Ÿåˆ—çš„åŒä¸€ä¸ªæ¶ˆæ¯ä¸­çš„ setState éƒ½è¿›è¡Œåˆå¹¶ä»¥åå†é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚</p>
<h2 id="æ–¹å¼äºŒï¼šåœ¨JSXä¸­ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼Œä¼ å…¥é…ç½®å±æ€§ï¼Œæ ¹æ®å±æ€§æ˜¾ç¤ºçŠ¶æ€"><a href="#æ–¹å¼äºŒï¼šåœ¨JSXä¸­ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼Œä¼ å…¥é…ç½®å±æ€§ï¼Œæ ¹æ®å±æ€§æ˜¾ç¤ºçŠ¶æ€" class="headerlink" title="æ–¹å¼äºŒï¼šåœ¨JSXä¸­ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼Œä¼ å…¥é…ç½®å±æ€§ï¼Œæ ¹æ®å±æ€§æ˜¾ç¤ºçŠ¶æ€"></a>æ–¹å¼äºŒï¼šåœ¨JSXä¸­ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼Œä¼ å…¥é…ç½®å±æ€§ï¼Œæ ¹æ®å±æ€§æ˜¾ç¤ºçŠ¶æ€</h2><p>åœ¨ä½¿ç”¨ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå‚æ•°æ”¾åœ¨æ ‡ç­¾çš„å±æ€§å½“ä¸­ï¼Œæ‰€æœ‰çš„å±æ€§éƒ½ä¼šä½œä¸º props å¯¹è±¡çš„é”®å€¼<br>ç»„ä»¶å†…éƒ¨å°±å¯ä»¥é€šè¿‡ this.props æ¥è®¿é—®åˆ°è¿™äº›é…ç½®å‚æ•°<br>å¯ä»¥æŠŠä»»ä½•ç±»å‹çš„æ•°æ®ä½œä¸ºç»„ä»¶çš„å‚æ•°ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²ã€æ•°å­—ã€å¯¹è±¡ã€æ•°ç»„ã€ç”šè‡³æ˜¯å‡½æ•°ç­‰ç­‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">class Index extends Component &#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;LikeButton wordings=&#123;&#123;likedText: &apos;å·²èµ&apos;, unlikedText: &apos;èµ&apos;&#125;&#125;</span><br><span class="line">        onClick=&#123;() =&gt; console.log(&apos;Click on like button!&apos;)/&gt; //è¿™é‡Œonclickå¯ä»¥è¢«å½“åšå±æ€§è®¿é—®åˆ°</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">//LikeButton ç±»</span><br><span class="line">handleClickOnLikeButton () &#123;</span><br><span class="line"></span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      isLiked: !this.state.isLiked</span><br><span class="line">    &#125;)</span><br><span class="line">    if (this.props.onClick) &#123; //è¿™é‡Œçš„onclickæ˜¯ä½¿ç”¨&lt;LikeButton /&gt;æ—¶å®šä¹‰çš„å±æ€§</span><br><span class="line">      this.props.onClick() //è¿™é‡Œçš„å‡½æ•°é€šè¿‡å±æ€§ä¼ é€’è¿›æ¥ï¼Œä¸æ˜¯ç»„ä»¶è‡ªå·±å®ç°</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">render()return çš„JSXçš„button onclickäº‹ä»¶ç»‘å®šhandleClickOnLikeButtonå‡½æ•°</span><br></pre></td></tr></table></figure></p>
<p>JSX çš„{}å†…å¯ä»¥åµŒå…¥ä»»ä½•è¡¨è¾¾å¼,{ {} }å°±æ˜¯åœ¨ {} å†…éƒ¨ç”¨å¯¹è±¡}å­—é¢é‡è¿”å›ä¸€ä¸ªå¯¹è±¡è€Œå·²,<br>this.props.wordingså°±æ˜¯å¯¹è±¡{ likedText: â€˜å·²èµâ€™, unlikedText: â€˜èµâ€™} </p>
<p>å¯ä»¥ç”¨defaultPropsé…ç½®é»˜è®¤å±æ€§,è¿™æ ·å°±ä¸éœ€è¦åˆ¤æ–­é…ç½®å±æ€§æ˜¯å¦ä¼ è¿›æ¥äº†,å¦‚æœæ²¡æœ‰ä¼ è¿›æ¥ï¼Œä¼šç›´æ¥ä½¿ç”¨ defaultProps ä¸­çš„é»˜è®¤å±æ€§</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">class LikeButton extends Component &#123;</span><br><span class="line">  static defaultProps = &#123;</span><br><span class="line">    likedText: &apos;å–æ¶ˆ&apos;,</span><br><span class="line">    unlikedText: &apos;ç‚¹èµ&apos;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  constructor () &#123;</span><br><span class="line">    super()</span><br><span class="line">    this.state = &#123; isLiked: false &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClickOnLikeButton () &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      isLiked: !this.state.isLiked</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">  //ä¸éœ€è¦åœ¨è¿™é‡Œå‘ä¸‹é¢è¿™æ ·åˆ¤æ–­æ˜¯å¦ä¼ è¿›æ¥äº†é…ç½®å±æ€§,å¦‚æœé…ç½®äº†wordingså°±ç”¨wordingsï¼Œå¦åˆ™ç”¨åé¢&#123;&#125;å†…çš„é»˜è®¤å€¼</span><br><span class="line">  &lt;!-- const wordings = this.props.wordings || &#123;</span><br><span class="line">      likedText: &apos;å–æ¶ˆ&apos;,</span><br><span class="line">      unlikedText: &apos;ç‚¹èµ&apos;</span><br><span class="line">    &#125; --&gt;</span><br><span class="line">    return (</span><br><span class="line">      &lt;button onClick=&#123;this.handleClickOnLikeButton.bind(this)&#125;&gt;</span><br><span class="line">        &#123;this.state.isLiked</span><br><span class="line">          ? this.props.likedText //ç›´æ¥ä½¿ç”¨</span><br><span class="line">          : this.props.unlikedText&#125; ğŸ‘</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªç»„ä»¶åœ¨è¾“å…¥ç¡®å®šçš„ props çš„æ—¶å€™ï¼Œèƒ½å¤Ÿè¾“å‡ºç¡®å®šçš„ UI æ˜¾ç¤ºå½¢æ€ã€‚å¦‚æœæƒ³ä¿®æ”¹propså†³å®šçš„æ˜¾ç¤ºå½¢æ€ï¼Œå¯ä»¥ä¸»åŠ¨é€šè¿‡é‡æ–°æ¸²æŸ“çš„æ–¹å¼ï¼Œ<br>æŠŠæ–°çš„propsä¼ å…¥åˆ°ç»„ä»¶å½“ä¸­ï¼Œè¿™æ ·è¿™ä¸ªç»„ä»¶ä¸­ç”± props å†³å®šçš„æ˜¾ç¤ºå½¢æ€ä¹Ÿä¼šå¾—åˆ°ç›¸åº”çš„æ”¹å˜ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">class Index extends Component &#123;</span><br><span class="line">  constructor () &#123;</span><br><span class="line">    super()</span><br><span class="line">    this.state = &#123;</span><br><span class="line">      likedText: &apos;å·²èµ&apos;,</span><br><span class="line">      unlikedText: &apos;èµ&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClickOnChange () &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      likedText: &apos;å–æ¶ˆ&apos;,</span><br><span class="line">      unlikedText: &apos;ç‚¹èµ&apos;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;LikeButton</span><br><span class="line">          likedText=&#123;this.state.likedText&#125;</span><br><span class="line">          unlikedText=&#123;this.state.unlikedText&#125; /&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;button onClick=&#123;this.handleClickOnChange.bind(this)&#125;&gt;</span><br><span class="line">            ä¿®æ”¹ wordings</span><br><span class="line">          &lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å³props ä¸€æ—¦ä¼ å…¥,ä½ å°±ä¸å¯ä»¥åœ¨ç»„ä»¶å†…éƒ¨å¯¹å®ƒè¿›è¡Œä¿®æ”¹ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡çˆ¶ç»„ä»¶ä¸»åŠ¨é‡æ–°æ¸²æŸ“çš„æ–¹å¼æ¥ä¼ å…¥æ–°çš„ propsï¼Œä»è€Œè¾¾åˆ°æ›´æ–°çš„æ•ˆæœ</p>
<p>å°ç»“<br>state æ˜¯è®©ç»„ä»¶æ§åˆ¶è‡ªå·±çš„çŠ¶æ€ï¼Œprops æ˜¯è®©å¤–éƒ¨å¯¹ç»„ä»¶è‡ªå·±è¿›è¡Œé…ç½®ã€‚<br>æ²¡æœ‰ state çš„ç»„ä»¶å«æ— çŠ¶æ€ç»„ä»¶ï¼ˆstateless componentï¼‰ï¼Œè®¾ç½®äº† state çš„å«åšæœ‰çŠ¶æ€ç»„ä»¶ï¼ˆstateful componentï¼‰<br>å› ä¸ºçŠ¶æ€ä¼šå¸¦æ¥ç®¡ç†çš„å¤æ‚æ€§ï¼Œæ‰€ä»¥å°½é‡å¤šåœ°å†™æ— çŠ¶æ€ç»„ä»¶ï¼Œå°½é‡å°‘åœ°å†™æœ‰çŠ¶æ€çš„ç»„ä»¶ã€‚è¿™æ ·ä¼šé™ä½ä»£ç ç»´æŠ¤çš„éš¾åº¦ï¼Œä¹Ÿä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢å¼ºç»„ä»¶çš„å¯å¤ç”¨æ€§ã€‚</p>
<h1 id="å‡½æ•°å¼ç»„ä»¶"><a href="#å‡½æ•°å¼ç»„ä»¶" class="headerlink" title="å‡½æ•°å¼ç»„ä»¶"></a>å‡½æ•°å¼ç»„ä»¶</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//æ™®é€šå†™æ³•</span><br><span class="line">class HelloWorld extends Component &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    super()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  sayHi () &#123;</span><br><span class="line">    alert(&apos;Hello World&apos;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div onClick=&#123;this.sayHi.bind(this)&#125;&gt;Hello World&lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å‡½æ•°å¼ç»„ä»¶çš„ç¼–å†™æ–¹å¼</span><br><span class="line">const HelloWorld = (props) =&gt; &#123;</span><br><span class="line">  const sayHi = (event) =&gt; alert(&apos;Hello World&apos;)</span><br><span class="line">  return (</span><br><span class="line">    &lt;div onClick=&#123;sayHi&#125;&gt;Hello World&lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥å‰ä¸€ä¸ªç»„ä»¶æ˜¯é€šè¿‡ç»§æ‰¿ Component æ¥æ„å»ºï¼Œä¸€ä¸ªå­ç±»å°±æ˜¯ä¸€ä¸ªç»„ä»¶ã€‚è€Œç”¨å‡½æ•°å¼çš„ç»„ä»¶ç¼–å†™æ–¹å¼æ˜¯ä¸€ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œä½†ä½¿ç”¨æ–¹æ³•åŒæ™®é€šå†™æ³•<br>å‡½æ•°å¼ç»„ä»¶åªèƒ½æ¥å— props è€Œæ— æ³•åƒè·Ÿç±»ç»„ä»¶ä¸€æ ·å¯ä»¥åœ¨ constructor é‡Œé¢åˆå§‹åŒ– stateã€‚ä½ å¯ä»¥ç†è§£å‡½æ•°å¼ç»„ä»¶å°±æ˜¯ä¸€ç§åªèƒ½æ¥å— props å’Œæä¾› render æ–¹æ³•çš„ç±»ç»„ä»¶ã€‚</p>
<h1 id="æ¸²æŸ“åˆ—è¡¨æ•°æ®"><a href="#æ¸²æŸ“åˆ—è¡¨æ•°æ®" class="headerlink" title="æ¸²æŸ“åˆ—è¡¨æ•°æ®"></a>æ¸²æŸ“åˆ—è¡¨æ•°æ®</h1><p>å¦‚æœå¾€ {} æ”¾ä¸€ä¸ªæ•°ç»„ï¼ŒReact.js ä¼šå¸®ä½ æŠŠæ•°ç»„é‡Œé¢ä¸€ä¸ªä¸ªå…ƒç´ ç½—åˆ—å¹¶ä¸”æ¸²æŸ“å‡ºæ¥ï¼Œå¦‚æœæ•°ç»„æ¯ä¸€é¡¹æ˜¯JSXï¼Œå°±å¯ä»¥å°†æ•°æ®æ¸²æŸ“åˆ°htmlé‡Œé¢äº†<br>æ‰€ä»¥reactæ¸²æŸ“åˆ—è¡¨çš„æ€è·¯å°±æ˜¯,å°†æ•°ç»„æ•°æ®åˆ©ç”¨es6çš„mapæ–¹æ³•è½¬æ¢æˆJSX,å†å°†JSXæ•°ç»„æ”¾åˆ°render()è¿”å›å€¼ä¸­<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">class Index extends Component &#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;users.map((user) =&gt; &#123;</span><br><span class="line">          return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">              &lt;div&gt;å§“åï¼š&#123;user.username&#125;&lt;/div&gt;</span><br><span class="line">              &lt;div&gt;å¹´é¾„ï¼š&#123;user.age&#125;&lt;/div&gt;</span><br><span class="line">              &lt;div&gt;æ€§åˆ«ï¼š&#123;user.gender&#125;&lt;/div&gt;</span><br><span class="line">              &lt;hr /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          )</span><br><span class="line">        &#125;)&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿›ä¸€æ­¥ä¼˜åŒ–,å°†æ•°ç»„æ¯é¡¹JSXæŠ½ç¦»æˆè‡ªå®šä¹‰ç»„ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">const users = [</span><br><span class="line">  &#123; username: &apos;Jerry&apos;, age: 21, gender: &apos;male&apos; &#125;,</span><br><span class="line">  &#123; username: &apos;Tomy&apos;, age: 22, gender: &apos;male&apos; &#125;,</span><br><span class="line">  &#123; username: &apos;Lily&apos;, age: 19, gender: &apos;female&apos; &#125;,</span><br><span class="line">  &#123; username: &apos;Lucy&apos;, age: 20, gender: &apos;female&apos; &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">class User extends Component &#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    const &#123; user &#125; = this.props</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;div&gt;å§“åï¼š&#123;user.username&#125;&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;å¹´é¾„ï¼š&#123;user.age&#125;&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;æ€§åˆ«ï¼š&#123;user.gender&#125;&lt;/div&gt;</span><br><span class="line">        &lt;hr /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Index extends Component &#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;users.map((user) =&gt; &lt;User user=&#123;user&#125; /&gt;)&#125;</span><br><span class="line">        &lt;!-- &#123;users.map((user, i) =&gt; &lt;User key=&#123;i&#125; user=&#123;user&#125; /&gt;)&#125; --&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Index /&gt;,</span><br><span class="line">  document.getElementById(&apos;root&apos;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>ä½†æ˜¯è¦æ³¨æ„<br>å¯¹äºç”¨è¡¨è¾¾å¼å¥—æ•°ç»„ç½—åˆ—åˆ°é¡µé¢ä¸Šçš„å…ƒç´ ï¼Œéƒ½è¦ä¸ºæ¯ä¸ªå…ƒç´ åŠ ä¸Š key å±æ€§ï¼Œè¿™ä¸ª key å¿…é¡»æ˜¯æ¯ä¸ªå…ƒç´ å”¯ä¸€çš„æ ‡è¯†<br>è¿™é‡Œç”¨å¾ªç¯è®¡æ•°å™¨ i ä½œä¸º keyå¯¹å¾ªç¯æ ‡ç­¾Useræ·»åŠ key,å°±ä¸ä¼šæŠ¥éœ€è¦keyçš„é”™äº†<br>{users.map((user) =&gt; <user user="\{user\}">)} å˜æˆ {users.map((user, i) =&gt; <user key="\{i\}" user="\{user\}">)}</user></user></p>
<h1 id="å—æ§ç»„ä»¶"><a href="#å—æ§ç»„ä»¶" class="headerlink" title="å—æ§ç»„ä»¶"></a>å—æ§ç»„ä»¶</h1><p>ç±»ä¼¼äº &lt;input /&gt;ã€&lt;select /&gt;ã€&lt;textarea&gt; è¿™äº›å…ƒç´ çš„ value å€¼è¢« React.js æ‰€æ§åˆ¶ã€æ¸²æŸ“çš„ç»„ä»¶ï¼Œåœ¨ React.js å½“ä¸­è¢«ç§°ä¸ºå—æ§ç»„ä»¶ï¼ˆControlled Componentï¼‰ã€‚å¯¹äºç”¨æˆ·å¯è¾“å…¥çš„æ§ä»¶ï¼Œä¸€èˆ¬éƒ½å¯ä»¥è®©å®ƒä»¬æˆä¸ºå—æ§ç»„ä»¶.<br>React.js è®¤ä¸ºæ‰€æœ‰çš„çŠ¶æ€éƒ½åº”è¯¥ç”± React.js çš„ state æ§åˆ¶ï¼Œåªè¦ç±»ä¼¼äº &lt;input /&gt;ã€&lt;textarea /&gt;ã€&lt;select /&gt; è¿™æ ·çš„è¾“å…¥æ§ä»¶è¢«è®¾ç½®äº† value å€¼ï¼Œé‚£ä¹ˆå®ƒä»¬çš„å€¼ç­‰äºstateçš„ä¸€ä¸ªå±æ€§å€¼ï¼Œå°±ä¼šæ°¸è¿œä»¥è¢«è®¾ç½®çš„å€¼ä¸ºå‡†ã€‚å€¼ä¸å˜ï¼Œvalue å°±ä¸ä¼šå˜åŒ–ã€‚<br>åœ¨ React.js å½“ä¸­å¿…é¡»è¦ç”¨ setState æ‰èƒ½æ›´æ–°ç»„ä»¶çš„å†…å®¹,æ‰€ä»¥å¯ä»¥é€šè¿‡ç»™è¾“å…¥æ¡†ç»‘å®šç›‘å¬è¾“å…¥æ¡†çš„ onChange äº‹ä»¶ï¼Œç„¶åè·å–åˆ°ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼Œå†é€šè¿‡ setState çš„æ–¹å¼æ›´æ–° state ä¸­çš„ valueå±æ€§ç»‘å®šçš„å€¼ï¼Œè¿™æ · è¾“å…¥æ¡†çš„å†…å®¹æ‰ä¼šæ›´æ–°ã€‚</p>
<p>å­ç»„ä»¶å¯ä»¥åˆ©ç”¨propså‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œå³ï¼Œçˆ¶ç»„ä»¶åœ¨ä½¿ç”¨å­ç»„ä»¶æ—¶ï¼Œæ·»åŠ å±æ€§Aï¼Œå¹¶å°†è¯¥Aå±æ€§å€¼èµ‹å€¼ä¸ºä¸€ä¸ªçˆ¶ç»„ä»¶çš„å‡½æ•°Bï¼Œ<br>å­ç»„ä»¶åœ¨è§¦å‘æ•°æ®æäº¤çš„æ—¶å€™ï¼Œæ£€æŸ¥è‡ªå·±çš„propsæœ‰æ²¡æœ‰å±æ€§A,å¦‚æœæœ‰çš„è¯ï¼Œå°†æ•°æ®ä»¥å‚æ•°çš„å½¢å¼ï¼Œä¼ é€’ç»™å±æ€§Aï¼Œå³<br>this.props.A({key1:value1,key2â€value2â€¦.})<br>çˆ¶ç»„ä»¶å‡½æ•°Bé€šè¿‡å‡½æ•°å‚æ•°å°±å¯ä»¥è·å¾—ä¼ é€’è¿‡æ¥çš„æ•°æ®</p>
<p>å­ç»„ä»¶ä»çˆ¶ç»„ä»¶è·å–æ•°æ®ï¼ŒåŒæ ·ä½¿ç”¨props,ä¹Ÿå°±æ˜¯è¯´ï¼Œçˆ¶ç»„ä»¶åœ¨ä½¿ç”¨å­ç»„ä»¶çš„æ—¶å€™æŠŠè‡ªå·±çš„stateçš„ä¸€ä¸ªå±æ€§Cèµ‹å€¼ç»™å­ç»„ä»¶çš„å±æ€§D,<br>å­ç»„ä»¶é€šè¿‡å±æ€§Dè·å–çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®,åœ¨å­ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨props.Dçš„å€¼ï¼Œä½†è¦æ³¨æ„ç»™å­ç»„ä»¶è®¾ç½®defaultPropsï¼Œç»™å±æ€§Dä¸€ä¸ªé»˜è®¤å€¼ï¼Œé˜²æ­¢å‡ºç°ä¸ä¼ å€¼çš„æƒ…å†µ<br>è¿™ç§è¡Œä¸ºå«åšâ€œçŠ¶æ€æå‡â€<br>å¦‚æœå°†å±æ€§Dçš„å€¼ï¼Œå†ä¿å­˜åˆ°å­ç»„ä»¶çš„stateä¸­åœ¨ä½¿ç”¨ï¼Œé‚£ä¹ˆå½“å…¶ä»–ç»„ä»¶ä¹Ÿéœ€è¦è¿™ä»½æ•°æ®çš„æ—¶å€™ï¼Œå°†æ— æ³•ä½¿ç”¨ï¼Œå› ä¸ºæ ¹æœ¬æ²¡åŠæ³•è®¿é—®,å› æ­¤é‡‡ç”¨ä½¿ç”¨propså€¼çš„åŠæ³•ï¼Œå°†è¿™ç§ç»„ä»¶ä¹‹é—´å…±äº«çš„çŠ¶æ€äº¤ç»™ç»„ä»¶æœ€è¿‘çš„å…¬å…±çˆ¶èŠ‚ç‚¹ä¿ç®¡ï¼Œç„¶åé€šè¿‡ props æŠŠçŠ¶æ€ä¼ é€’ç»™å­ç»„ä»¶ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ç»„ä»¶ä¹‹é—´å…±äº«æ•°æ®äº†</p>
<p>å½“æŸä¸ªçŠ¶æ€è¢«å¤šä¸ªç»„ä»¶ä¾èµ–æˆ–è€…å½±å“çš„æ—¶å€™ï¼Œå°±æŠŠè¯¥çŠ¶æ€æå‡åˆ°è¿™äº›ç»„ä»¶çš„æœ€è¿‘å…¬å…±çˆ¶ç»„ä»¶ä¸­å»ç®¡ç†ï¼Œç”¨ props ä¼ é€’æ•°æ®æˆ–è€…å‡½æ•°æ¥ç®¡ç†è¿™ç§ä¾èµ–æˆ–ç€å½±å“çš„è¡Œä¸ºã€‚<br>å¯¹äºä¸ä¼šè¢«å¤šä¸ªç»„ä»¶ä¾èµ–å’Œå½±å“çš„çŠ¶æ€ï¼ˆä¾‹å¦‚æŸç§ä¸‹æ‹‰èœå•çš„å±•å¼€å’Œæ”¶èµ·çŠ¶æ€ï¼‰ï¼Œä¸€èˆ¬æ¥è¯´åªéœ€è¦ä¿å­˜åœ¨ç»„ä»¶å†…éƒ¨å³å¯ï¼Œä¸éœ€è¦åšæå‡æˆ–è€…ç‰¹æ®Šçš„ç®¡ç†ã€‚</p>
<h1 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h1><h2 id="æŒ‚è½½"><a href="#æŒ‚è½½" class="headerlink" title="æŒ‚è½½"></a>æŒ‚è½½</h2><p>React.js å°†ç»„ä»¶æ¸²æŸ“ï¼Œå¹¶ä¸”æ„é€  DOM å…ƒç´ ç„¶åå¡å…¥é¡µé¢çš„è¿‡ç¨‹ç§°ä¸ºç»„ä»¶çš„æŒ‚è½½<br>æŒ‚è½½è¿‡ç¨‹:<br>-&gt; constructor() //è‡ªèº«çš„çŠ¶æ€çš„åˆå§‹åŒ–å·¥ä½œ<br>-&gt; componentWillMount()//ç»„ä»¶è¿˜æ²¡æŒ‚è½½å®Œæˆæ—¶è¿›è¡Œçš„ç»„ä»¶å¯åŠ¨å·¥ä½œï¼Œä¾‹å¦‚ Ajax æ•°æ®æ‹‰å–ã€å®šæ—¶å™¨çš„å¯åŠ¨ã€‚<br>-&gt; render()<br>// ç„¶åæ„é€  DOM å…ƒç´ æ’å…¥é¡µé¢<br>-&gt; componentDidMount() //ç»„ä»¶æŒ‚è½½å®Œæˆä»¥åï¼Œä¹Ÿå°±æ˜¯ DOM å…ƒç´ å·²ç»æ’å…¥é¡µé¢åè°ƒç”¨ã€‚è¿›è¡Œä¾èµ–DOMçš„å¯åŠ¨å·¥ä½œ<br>// â€¦<br>// å³å°†ä»é¡µé¢ä¸­åˆ é™¤, setState åªèƒ½åœ¨å·²ç»æŒ‚è½½æˆ–è€…æ­£åœ¨æŒ‚è½½çš„ç»„ä»¶ä¸Šè°ƒç”¨,<br>//ç»„ä»¶éšè—çš„æ—¶å€™ï¼Œç»„ä»¶çš„å›è°ƒå‡½æ•°å¯èƒ½è¿˜åœ¨ä¸åœåœ°å°è¯• setState,å› æ­¤ä¼šæŠ¥é”™<br>-&gt; componentWillUnmount() //ç»„ä»¶å¯¹åº”çš„ DOM å…ƒç´ ä»é¡µé¢ä¸­åˆ é™¤ä¹‹å‰è°ƒç”¨,å¤„ç†æ•°æ®æ¸…ç†å·¥ä½œï¼Œå¦‚å®šæ—¶å™¨çš„æ¸…ç†<br>// ä»é¡µé¢ä¸­åˆ é™¤</p>
<h2 id="æ›´æ–°é˜¶æ®µ"><a href="#æ›´æ–°é˜¶æ®µ" class="headerlink" title="æ›´æ–°é˜¶æ®µ"></a>æ›´æ–°é˜¶æ®µ</h2><p> setState å¯¼è‡´ React.js é‡æ–°æ¸²æŸ“ç»„ä»¶å¹¶ä¸”æŠŠç»„ä»¶çš„å˜åŒ–åº”ç”¨åˆ° DOM å…ƒç´ ä¸Šçš„è¿‡ç¨‹ï¼Œè¿™æ˜¯ä¸€ä¸ªç»„ä»¶çš„å˜åŒ–è¿‡ç¨‹ã€‚è€Œ React.js ä¹Ÿæä¾›äº†ä¸€ç³»åˆ—çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¯ä»¥è®©æˆ‘ä»¬åœ¨è¿™ä¸ªç»„ä»¶æ›´æ–°çš„è¿‡ç¨‹æ‰§è¡Œä¸€äº›æ“ä½œã€‚<br> å…³äºæ›´æ–°é˜¶æ®µçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼š<br>shouldComponentUpdate(nextProps, nextState)ï¼šä½ å¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹æ³•æ§åˆ¶ç»„ä»¶æ˜¯å¦é‡æ–°æ¸²æŸ“ã€‚å¦‚æœè¿”å› false ç»„ä»¶å°±ä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚è¿™ä¸ªç”Ÿå‘½å‘¨æœŸåœ¨ React.js æ€§èƒ½ä¼˜åŒ–ä¸Šéå¸¸æœ‰ç”¨ã€‚<br>componentWillReceiveProps(nextProps)ï¼šç»„ä»¶ä»çˆ¶ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„ props ä¹‹å‰è°ƒç”¨ã€‚<br>componentWillUpdate()ï¼šç»„ä»¶å¼€å§‹é‡æ–°æ¸²æŸ“ä¹‹å‰è°ƒç”¨ã€‚<br>componentDidUpdate()ï¼šç»„ä»¶é‡æ–°æ¸²æŸ“å¹¶ä¸”æŠŠæ›´æ”¹å˜æ›´åˆ°çœŸå®çš„ DOM ä»¥åè°ƒç”¨ã€‚<br><a href="https://reactjs.org/docs/react-component.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p>
<h1 id="refå±æ€§"><a href="#refå±æ€§" class="headerlink" title="refå±æ€§"></a>refå±æ€§</h1><p>é€šè¿‡åœ¨htmlæ ‡ç­¾æˆ–è‡ªå®šä¹‰çš„ç»„ä»¶æ ‡ç­¾ä¸­æ·»åŠ  refå±æ€§ï¼Œå¯ä»¥ç»‘å®šDOMæ“ä½œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class AutoFocusInput extends Component &#123;</span><br><span class="line">  componentDidMount () &#123; //åˆ©ç”¨ç»„ä»¶å£°æ˜å‘¨æœŸå‡½æ•°</span><br><span class="line">    this.input.focus() //è¿™é‡Œçš„this.inputå°±æ˜¯é¡µé¢é‡Œçš„DOMå…ƒç´ ï¼Œå› æ­¤å¯ä»¥ç›´æ¥ä½¿ç”¨DOM API</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;input ref=&#123;(input) =&gt; this.input = input&#125; /&gt; //æŠŠinputæ ‡ç­¾DOMå…ƒç´ æŒ‚åˆ°ç»„ä»¶çš„å±æ€§inputä¸Š</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>input å…ƒç´ åŠ äº†ä¸€ä¸ª ref å±æ€§ï¼Œè¿™ä¸ªå±æ€§å€¼æ˜¯ä¸€ä¸ªå‡½æ•°,<br>å½“ input å…ƒç´ åœ¨é¡µé¢ä¸ŠæŒ‚è½½å®Œæˆä»¥åï¼ŒReact.js å°±ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°,å‡½æ•°çš„å‚æ•°ï¼Œå°±æ˜¯æŒ‚è½½ä»¥åçš„DOMç»“ç‚¹<br>åœ¨å‡½æ•°ä¸­æŠŠè¿™ä¸ª DOM å…ƒç´ è®¾ç½®ä¸ºç»„ä»¶å®ä¾‹çš„ä¸€ä¸ªå±æ€§ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡ this.input è·å–åˆ°è¿™ä¸ª DOM å…ƒç´ ã€‚</p>
<p>ä½†æ³¨æ„,èƒ½ä¸ç”¨ ref å°±ä¸ç”¨ï¼Œå› ä¸ºReact.js æœ¬æ¥å°±å¯ä»¥åšåˆ°çš„é¡µé¢è‡ªåŠ¨æ›´æ–°çš„æ“ä½œå’Œäº‹ä»¶ç›‘å¬ï¼Œå¤šä½™DOMæ“ä½œï¼Œä¸åˆ©äºç†è§£å’Œç»´æŠ¤</p>
<h1 id="dangerouslySetHTML"><a href="#dangerouslySetHTML" class="headerlink" title="dangerouslySetHTML"></a>dangerouslySetHTML</h1><p>dangerouslySetInnerHTML å±æ€§å¯ä»¥ç”¨äºåŠ¨æ€æ¸²æŸ“HTMLç»“æ„,å³å°†HTMLå­—ç¬¦ä¸²ï¼Œåœ¨é¡µé¢ä¸­æ˜¾ç¤ºæ—¶,å½“åšHTMLå»æ¸²æŸ“<br>ç»™ dangerouslySetInnerHTML ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„ __html å±æ€§å€¼å°±ç›¸å½“äºå…ƒç´ çš„ innerHTMLï¼Œè¿™æ ·å°±å¯ä»¥åŠ¨æ€æ¸²æŸ“å…ƒç´ çš„ innerHTML ç»“æ„äº†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">constructor() &#123;</span><br><span class="line">    super()</span><br><span class="line">    this.state = &#123;</span><br><span class="line">      content: &apos;&lt;h1&gt;React.js cool!&lt;/h1&gt;&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div</span><br><span class="line">        className=&apos;editor-wrapper&apos;</span><br><span class="line">        dangerouslySetInnerHTML=&#123;&#123;__html: this.state.content&#125;&#125; /&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p>å› ä¸ºè®¾ç½® innerHTML å¯èƒ½ä¼šå¯¼è‡´è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ï¼Œæ‰€ä»¥ React.js å›¢é˜Ÿè®¤ä¸ºæŠŠäº‹æƒ…æå¤æ‚å¯ä»¥é˜²æ­¢ï¼ˆè­¦ç¤ºï¼‰å¤§å®¶æ»¥ç”¨è¿™ä¸ªå±æ€§ã€‚è¿™ä¸ªå±æ€§ä¸å¿…è¦çš„æƒ…å†µå°±ä¸è¦ä½¿ç”¨</p>
<h1 id="style"><a href="#style" class="headerlink" title="style"></a>style</h1><p>åœ¨ React.js ä¸­éœ€è¦æŠŠ CSS å±æ€§å˜æˆä¸€ä¸ªå¯¹è±¡å†ä¼ ç»™å…ƒç´ <br>style æ¥å—ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡é‡Œé¢æ˜¯è¿™ä¸ªå…ƒç´ çš„ CSS å±æ€§é”®å€¼å¯¹ï¼ŒåŸæ¥ CSS å±æ€§ä¸­å¸¦ - çš„å…ƒç´ éƒ½å¿…é¡»è¦å»æ‰ - æ¢æˆé©¼å³°å‘½åï¼Œå¦‚ font-size æ¢æˆ fontSizeï¼Œtext-align æ¢æˆ textAlignã€‚<br>ç”¨å¯¹è±¡ä½œä¸º style æ–¹ä¾¿åŠ¨æ€è®¾ç½®å…ƒç´ çš„æ ·å¼ã€‚å¯ä»¥ç”¨ props æˆ–è€… state ä¸­çš„æ•°æ®ç”Ÿæˆæ ·å¼å¯¹è±¡å†ä¼ ç»™å…ƒç´ ï¼Œç„¶åç”¨ setState å°±å¯ä»¥ä¿®æ”¹æ ·å¼ï¼Œéå¸¸çµæ´»</p>
<p>&lt;h1 style={ {fontSize: â€˜12pxâ€™, color: this.state.color} }&gt;React.js color&lt;/h1&gt;</p>
<h1 id="PropTypes-ç»„ä»¶å‚æ•°ç±»å‹éªŒè¯"><a href="#PropTypes-ç»„ä»¶å‚æ•°ç±»å‹éªŒè¯" class="headerlink" title="PropTypes ç»„ä»¶å‚æ•°ç±»å‹éªŒè¯"></a>PropTypes ç»„ä»¶å‚æ•°ç±»å‹éªŒè¯</h1><p>ç»™ç»„ä»¶çš„é…ç½®å‚æ•°åŠ ä¸Šç±»å‹éªŒè¯,å°±å¯ä»¥éªŒè¯ä¼ è¿›ç»„ä»¶çš„å‚æ•°æ˜¯å¦ç¬¦åˆé¢„å®šçš„æ•°æ®ç±»å‹ï¼ŒæŠ¥é”™ä¹Ÿèƒ½å®šä½é—®é¢˜<br>PropTypeså°±æ˜¯reactç¬¬ä¸‰æ–¹åº“ï¼Œç”¨äºéªŒè¯å‚æ•°ç±»å‹ï¼Œå³éªŒè¯ä¼ å…¥ç»„ä»¶çš„æ•°æ®çš„æ•°æ®ç±»å‹<br>npm install â€“save prop-types<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line">import PropTypes from &apos;prop-types&apos;</span><br><span class="line"></span><br><span class="line">class Comment extends Component &#123;</span><br><span class="line">  static propTypes = &#123;</span><br><span class="line">    comment: PropTypes.object //æŒ‡å®šä¼ å…¥commentçš„ç±»å‹å¿…é¡»ä¸ºObject</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    const &#123; comment &#125; = this.props</span><br><span class="line">    return (</span><br><span class="line">      &lt;div className=&apos;comment&apos;&gt;</span><br><span class="line">        &lt;div className=&apos;comment-user&apos;&gt;</span><br><span class="line">          &lt;span&gt;&#123;comment.username&#125; &lt;/span&gt;ï¼š</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;p&gt;&#123;comment.content&#125;&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>propTypes æŒ‡å®šäº†å‚æ•°ç±»å‹ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è¯´è¿™ä¸ªå‚æ•°ä¸€å®šè¦ä¼ å…¥ï¼Œäº‹å®ä¸Šï¼Œè¿™äº›å‚æ•°é»˜è®¤éƒ½æ˜¯å¯é€‰çš„ã€‚å¯é€‰å‚æ•°å¯ä»¥é€šè¿‡é…ç½® defaultPropsï¼Œè®©å®ƒåœ¨ä¸ä¼ å…¥çš„æ—¶å€™æœ‰é»˜è®¤å€¼ã€‚<br>ä½†æ˜¯è¿™é‡Œå¹¶æ²¡æœ‰é…ç½® defaultPropsï¼Œæ‰€ä»¥å¦‚æœç›´æ¥ç”¨&lt;Comment /&gt; è€Œä¸ä¼ å…¥ä»»ä½•å‚æ•°çš„è¯ï¼Œcomment å°±ä¼šæ˜¯ undefinedï¼Œ<br>å¯ä»¥é€šè¿‡ isRequired å…³é”®å­—æ¥å¼ºåˆ¶ç»„ä»¶æŸä¸ªå‚æ•°å¿…é¡»ä¼ å…¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">static propTypes = &#123;</span><br><span class="line">  comment: PropTypes.object.isRequired</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>React.js æä¾›çš„ PropTypes æä¾›äº†ä¸€ç³»åˆ—çš„æ•°æ®ç±»å‹å¯ä»¥ç”¨æ¥é…ç½®ç»„ä»¶çš„å‚æ•°ï¼š<br>PropTypes.array<br>PropTypes.bool<br>PropTypes.func<br>PropTypes.number<br>PropTypes.object<br>PropTypes.string<br>PropTypes.node<br>PropTypes.element</p>
<p><a href="https://reactjs.org/docs/typechecking-with-proptypes.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p>
<h1 id="å»ºè®®å‘½åå’Œå®šä¹‰é¡ºåº"><a href="#å»ºè®®å‘½åå’Œå®šä¹‰é¡ºåº" class="headerlink" title="å»ºè®®å‘½åå’Œå®šä¹‰é¡ºåº"></a>å»ºè®®å‘½åå’Œå®šä¹‰é¡ºåº</h1><p>ç»„ä»¶çš„ç§æœ‰æ–¹æ³•éƒ½ç”¨ _ å¼€å¤´<br>æ‰€æœ‰äº‹ä»¶ç›‘å¬çš„æ–¹æ³•éƒ½ç”¨ handle å¼€å¤´<br>æŠŠäº‹ä»¶ç›‘å¬æ–¹æ³•ä¼ ç»™ç»„ä»¶çš„æ—¶å€™ï¼Œå±æ€§åç”¨ on å¼€å¤´</p>
<p>ç»„ä»¶çš„å†…å®¹ç¼–å†™é¡ºåºå¦‚ä¸‹ï¼š</p>
<p>static å¼€å¤´çš„ç±»å±æ€§ï¼Œå¦‚ defaultPropsã€propTypesã€‚<br>æ„é€ å‡½æ•°ï¼Œconstructorã€‚<br>getter/setterã€‚<br>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸã€‚<br>_ å¼€å¤´çš„ç§æœ‰æ–¹æ³•ã€‚<br>äº‹ä»¶ç›‘å¬æ–¹æ³•ï¼Œhandle<em>ã€‚<br>render</em>å¼€å¤´çš„æ–¹æ³•ï¼Œæœ‰æ—¶å€™ render() æ–¹æ³•é‡Œé¢çš„å†…å®¹ä¼šåˆ†å¼€åˆ°ä¸åŒå‡½æ•°é‡Œé¢è¿›è¡Œï¼Œè¿™äº›å‡½æ•°éƒ½ä»¥ render* å¼€å¤´ã€‚<br>render() æ–¹æ³•ã€‚</p>
<h1 id="é«˜é˜¶ç»„ä»¶"><a href="#é«˜é˜¶ç»„ä»¶" class="headerlink" title="é«˜é˜¶ç»„ä»¶"></a>é«˜é˜¶ç»„ä»¶</h1><p>é«˜é˜¶ç»„ä»¶å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼ ç»™å®ƒä¸€ä¸ªç»„ä»¶ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶,è¿”å›çš„è¿™ä¸ªæ–°çš„ç»„ä»¶ä½¿ç”¨ä¼ å…¥çš„ç»„ä»¶ä½œä¸ºå­ç»„ä»¶ã€‚</p>
<p>é«˜é˜¶ç»„ä»¶å†…éƒ¨çš„åŒ…è£…ç»„ä»¶å’Œè¢«åŒ…è£…ç»„ä»¶ä¹‹é—´é€šè¿‡ props ä¼ é€’æ•°æ®ã€‚</p>
<p>å¤šå±‚é«˜é˜¶ç»„ä»¶ä½¿ç”¨æ—¶ï¼Œthis.propsæ˜¯ä»å¤–å‘é‡Œä¼ é€’çš„ï¼Œå³Aç»„ä»¶å…ˆåè¢«B,C,Dç»„ä»¶ç»„è£…ï¼Œåˆ™this.propsåˆ°è¾¾Aç»„ä»¶çš„é¡ºåºæ˜¯D,C,B,A</p>
<p>é«˜é˜¶ç»„ä»¶çš„ä½œç”¨æ˜¯ç”¨äºä»£ç å¤ç”¨ï¼Œå¯ä»¥æŠŠç»„ä»¶ä¹‹é—´å¯å¤ç”¨çš„ä»£ç ã€é€»è¾‘æŠ½ç¦»åˆ°é«˜é˜¶ç»„ä»¶å½“ä¸­ã€‚</p>
<p>é«˜é˜¶ç»„ä»¶æœ‰åŠ©äºæé«˜æˆ‘ä»¬ä»£ç çš„çµæ´»æ€§ï¼Œé€»è¾‘çš„å¤ç”¨æ€§ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">//é«˜é˜¶ç»„ä»¶wrapWithLoadData ,</span><br><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line"></span><br><span class="line">export default (WrappedComponent, name) =&gt; &#123;</span><br><span class="line">  class NewComponent extends Component &#123;</span><br><span class="line">    constructor () &#123;</span><br><span class="line">      super()</span><br><span class="line">      this.state = &#123; data: null &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentWillMount () &#123;</span><br><span class="line">      let data = localStorage.getItem(name)  //å¦‚æœæ”¹å˜æ•°æ®è·å–æ–¹å¼,å¯ä»¥ä¿®æ”¹è¿™é‡Œ</span><br><span class="line">      this.setState(&#123; data &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    //åœ¨æ­¤ä¹‹å‰ï¼Œå¯ä»¥åšå¾ˆå¤šè‡ªå®šä¹‰é€»è¾‘</span><br><span class="line">    render () &#123;</span><br><span class="line">      return &lt;WrappedComponent data=&#123;this.state.data&#125; /&gt;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return NewComponent</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨</span><br><span class="line">import wrapWithLoadData from &apos;./wrapWithLoadData&apos;</span><br><span class="line"></span><br><span class="line">class InputWithUserName extends Component &#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    return &lt;input value=&#123;this.props.data&#125; /&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">InputWithUserName = wrapWithLoadData(InputWithUserName, &apos;username&apos;) //ç»„ä»¶InputWithUserNameä»¥å‚æ•°ä¼ å…¥wrapWithLoadDataï¼Œè¿›è¡ŒåŒ…è£…</span><br><span class="line">export default InputWithUserName</span><br></pre></td></tr></table></figure>
<h1 id="context"><a href="#context" class="headerlink" title="context"></a>context</h1><p>ä¸€ä¸ªç»„ä»¶å¯ä»¥é€šè¿‡ getChildContext æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯å­æ ‘çš„ contextï¼Œæä¾› context çš„ç»„ä»¶å¿…é¡»æä¾› childContextTypes ä½œä¸º context çš„å£°æ˜å’ŒéªŒè¯ã€‚</p>
<p>å¦‚æœä¸€ä¸ªç»„ä»¶è®¾ç½®äº† contextï¼Œé‚£ä¹ˆå®ƒçš„å­ç»„ä»¶éƒ½å¯ä»¥ç›´æ¥è®¿é—®åˆ°é‡Œé¢çš„å†…å®¹ï¼Œå®ƒå°±åƒè¿™ä¸ªç»„ä»¶ä¸ºæ ¹çš„å­æ ‘çš„å…¨å±€å˜é‡ã€‚ä»»æ„æ·±åº¦çš„å­ç»„ä»¶éƒ½å¯ä»¥é€šè¿‡ contextTypes æ¥å£°æ˜ä½ æƒ³è¦çš„ context é‡Œé¢çš„å“ªäº›çŠ¶æ€ï¼Œç„¶åå¯ä»¥é€šè¿‡ this.context è®¿é—®åˆ°é‚£äº›çŠ¶æ€ã€‚</p>
<p>context æ‰“ç ´äº†ç»„ä»¶å’Œç»„ä»¶ä¹‹é—´é€šè¿‡ props ä¼ é€’æ•°æ®çš„è§„èŒƒï¼Œæå¤§åœ°å¢å¼ºäº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§ã€‚è€Œä¸”ï¼Œå°±å¦‚å…¨å±€å˜é‡ä¸€æ ·ï¼Œcontext é‡Œé¢çš„æ•°æ®èƒ½è¢«éšæ„æ¥è§¦å°±èƒ½è¢«éšæ„ä¿®æ”¹ï¼Œæ¯ä¸ªç»„ä»¶éƒ½èƒ½å¤Ÿæ”¹ context é‡Œé¢çš„å†…å®¹ä¼šå¯¼è‡´ç¨‹åºçš„è¿è¡Œä¸å¯é¢„æ–™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">//ç»„ä»¶æ ‘çš„æ ¹ç»„ä»¶</span><br><span class="line">class Index extends Component &#123;</span><br><span class="line">  static childContextTypes = &#123; //éªŒè¯getChildContext è¿”å›çš„å¯¹è±¡  å¿…å†™!!!</span><br><span class="line">    themeColor: PropTypes.string</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  constructor () &#123;</span><br><span class="line">    super()</span><br><span class="line">    this.state = &#123; themeColor: &apos;red&apos; &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getChildContext () &#123; //è®¾ç½® context,è¿”å›çš„å¯¹è±¡å°±æ˜¯å­ç»„ä»¶çš„this.context</span><br><span class="line">    return &#123; themeColor: this.state.themeColor &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Header /&gt;</span><br><span class="line">        &lt;Main /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">//å…¶ä¸­ä¸€å±‚çš„å­ç»„ä»¶</span><br><span class="line">class Title extends Component &#123;</span><br><span class="line">  static contextTypes = &#123; //æ¥å£°æ˜å’ŒéªŒè¯éœ€è¦è·å–çš„contxtå†…å®¹çš„ç±»å‹ å¿…å†™!!!</span><br><span class="line">    themeColor: PropTypes.string</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;h1 style=&#123;&#123; color: this.context.themeColor &#125;&#125;&gt;React.js å°ä¹¦æ ‡é¢˜&lt;/h1&gt; //ç›´æ¥ä½¿ç”¨this.contexté‡Œé¢çš„å€¼</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="redux-æ¨¡å¼"><a href="#redux-æ¨¡å¼" class="headerlink" title="redux æ¨¡å¼"></a>redux æ¨¡å¼</h1><p>ä»£ç ä¸­å‘ç°äº†å…±äº«çš„çŠ¶æ€å¦‚æœå¯ä»¥è¢«ä»»æ„ä¿®æ”¹çš„è¯ï¼Œé‚£ä¹ˆç¨‹åºçš„è¡Œä¸ºå°†éå¸¸ä¸å¯é¢„æ–™ï¼Œæ‰€ä»¥æé«˜äº†ä¿®æ”¹æ•°æ®çš„é—¨æ§›ï¼šå¿…é¡»é€šè¿‡ dispatch æ‰§è¡ŒæŸäº›å…è®¸çš„ä¿®æ”¹æ“ä½œï¼Œè€Œä¸”å¿…é¡»å¤§å¼ æ——é¼“çš„åœ¨ action é‡Œé¢å£°æ˜ã€‚</p>
<p>è¿™ç§æ¨¡å¼æŒºå¥½ç”¨çš„ï¼Œå°±æŠŠå®ƒæŠ½è±¡å‡ºæ¥ä¸€ä¸ª createStoreï¼Œå®ƒå¯ä»¥äº§ç”Ÿ storeï¼Œé‡Œé¢åŒ…å« getState å’Œ dispatch å‡½æ•°ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚</p>
<p>åæ¥å‘ç°æ¯æ¬¡ä¿®æ”¹æ•°æ®éƒ½éœ€è¦æ‰‹åŠ¨é‡æ–°æ¸²æŸ“éå¸¸éº»çƒ¦ï¼Œå› æ­¤å¸Œæœ›è‡ªåŠ¨é‡æ–°æ¸²æŸ“è§†å›¾ã€‚æ‰€ä»¥åæ¥åŠ å…¥äº†è®¢é˜…è€…æ¨¡å¼ï¼Œå¯ä»¥é€šè¿‡ store.subscribe è®¢é˜…æ•°æ®ä¿®æ”¹äº‹ä»¶ï¼Œæ¯æ¬¡æ•°æ®æ›´æ–°çš„æ—¶å€™è‡ªåŠ¨é‡æ–°æ¸²æŸ“è§†å›¾ã€‚</p>
<p>æ¥ä¸‹æ¥å‘ç°äº†åŸæ¥çš„â€œé‡æ–°æ¸²æŸ“è§†å›¾â€æœ‰æ¯”è¾ƒä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼ˆæ²¡æœ‰å‘ç”Ÿæ”¹å˜çš„æ•°æ®ä¹Ÿè¿›è¡Œäº†æ¸²æŸ“ï¼‰ï¼Œæˆ‘ä»¬å¼•å…¥äº†â€œå…±äº«ç»“æ„çš„å¯¹è±¡â€æ¥å¸®æˆ‘ä»¬è§£å†³é—®é¢˜ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æ¯ä¸ªæ¸²æŸ“å‡½æ•°çš„å¼€å¤´è¿›è¡Œç®€å•çš„åˆ¤æ–­é¿å…æ²¡æœ‰è¢«ä¿®æ”¹è¿‡çš„æ•°æ®é‡æ–°æ¸²æŸ“ã€‚</p>
<p>æˆ‘ä»¬ä¼˜åŒ–äº† stateChanger ä¸º reducerï¼Œå®šä¹‰äº† reducer åªèƒ½æ˜¯çº¯å‡½æ•°ï¼ŒåŠŸèƒ½å°±æ˜¯è´Ÿè´£åˆå§‹ stateï¼Œå’Œæ ¹æ® state å’Œ action è®¡ç®—å…·æœ‰å…±äº«ç»“æ„çš„æ–°çš„ stateã€‚</p>
<p>createStore ç°åœ¨å¯ä»¥ç›´æ¥æ‹¿æ¥ç”¨äº†ï¼Œå¥—è·¯å°±æ˜¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">function createStore (reducer) &#123;</span><br><span class="line">  let state = null</span><br><span class="line">  const listeners = []</span><br><span class="line">  const subscribe = (listener) =&gt; listeners.push(listener)</span><br><span class="line">  const getState = () =&gt; state</span><br><span class="line">  const dispatch = (action) =&gt; &#123;</span><br><span class="line">    state = reducer(state, action) // è¦†ç›–åŸå¯¹è±¡</span><br><span class="line">    listeners.forEach((listener) =&gt; listener())</span><br><span class="line">  &#125;</span><br><span class="line">  dispatch(&#123;&#125;) // åˆå§‹åŒ– state</span><br><span class="line">  return &#123; getState, dispatch, subscribe &#125;</span><br><span class="line">&#125;</span><br><span class="line">// å®šä¸€ä¸ª reducer</span><br><span class="line">function reducer (state, action) &#123;</span><br><span class="line">  /* åˆå§‹åŒ– state å’Œ switch case */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ç”Ÿæˆ store</span><br><span class="line">const store = createStore(reducer)</span><br><span class="line"></span><br><span class="line">// ç›‘å¬æ•°æ®å˜åŒ–é‡æ–°æ¸²æŸ“é¡µé¢</span><br><span class="line">store.subscribe(() =&gt; renderApp(store.getState()))</span><br><span class="line"></span><br><span class="line">// é¦–æ¬¡æ¸²æŸ“é¡µé¢</span><br><span class="line">renderApp(store.getState())</span><br><span class="line"></span><br><span class="line">// åé¢å¯ä»¥éšæ„ dispatch äº†ï¼Œé¡µé¢è‡ªåŠ¨æ›´æ–°</span><br><span class="line">store.dispatch(...)</span><br></pre></td></tr></table></figure></p>
<p>ä¾‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">function createStore (reducer) &#123;</span><br><span class="line">  let state = null</span><br><span class="line">  const listeners = []</span><br><span class="line">  const subscribe = (listener) =&gt; listeners.push(listener)</span><br><span class="line">  const getState = () =&gt; state</span><br><span class="line">  const dispatch = (action) =&gt; &#123;</span><br><span class="line">    state = reducer(state, action) // è¦†ç›–åŸå¯¹è±¡</span><br><span class="line">    listeners.forEach((listener) =&gt; listener())</span><br><span class="line">  &#125;</span><br><span class="line">  dispatch(&#123;&#125;) // åˆå§‹åŒ– state</span><br><span class="line">  return &#123; getState, dispatch, subscribe &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function renderApp (newAppState, oldAppState = &#123;&#125;) &#123; // é˜²æ­¢ oldAppState æ²¡æœ‰ä¼ å…¥ï¼Œæ‰€ä»¥åŠ äº†é»˜è®¤å‚æ•° oldAppState = &#123;&#125;</span><br><span class="line">  if (newAppState === oldAppState) return // æ•°æ®æ²¡æœ‰å˜åŒ–å°±ä¸æ¸²æŸ“äº†</span><br><span class="line">  console.log(&apos;render app...&apos;)</span><br><span class="line">  renderTitle(newAppState.title, oldAppState.title)</span><br><span class="line">  renderContent(newAppState.content, oldAppState.content)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function renderTitle (newTitle, oldTitle = &#123;&#125;) &#123;</span><br><span class="line">  if (newTitle === oldTitle) return // æ•°æ®æ²¡æœ‰å˜åŒ–å°±ä¸æ¸²æŸ“äº†</span><br><span class="line">  console.log(&apos;render title...&apos;)</span><br><span class="line">  const titleDOM = document.getElementById(&apos;title&apos;)</span><br><span class="line">  titleDOM.innerHTML = newTitle.text</span><br><span class="line">  titleDOM.style.color = newTitle.color</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function renderContent (newContent, oldContent = &#123;&#125;) &#123;</span><br><span class="line">  if (newContent === oldContent) return // æ•°æ®æ²¡æœ‰å˜åŒ–å°±ä¸æ¸²æŸ“äº†</span><br><span class="line">  console.log(&apos;render content...&apos;)</span><br><span class="line">  const contentDOM = document.getElementById(&apos;content&apos;)</span><br><span class="line">  contentDOM.innerHTML = newContent.text</span><br><span class="line">  contentDOM.style.color = newContent.color</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function stateChanger (state, action) &#123;</span><br><span class="line">   if (!state) &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      title: &#123;</span><br><span class="line">        text: &apos;React.js lalalal&apos;,</span><br><span class="line">        color: &apos;red&apos;,</span><br><span class="line">      &#125;,</span><br><span class="line">      content: &#123;</span><br><span class="line">        text: &apos;React.js content&apos;,</span><br><span class="line">        color: &apos;blue&apos;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  switch (action.type) &#123;</span><br><span class="line">    case &apos;UPDATE_TITLE_TEXT&apos;:</span><br><span class="line">      return &#123; // æ„å»ºæ–°çš„å¯¹è±¡å¹¶ä¸”è¿”å›</span><br><span class="line">        ...state,</span><br><span class="line">        title: &#123;</span><br><span class="line">          ...state.title,</span><br><span class="line">          text: action.text</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    case &apos;UPDATE_TITLE_COLOR&apos;:</span><br><span class="line">      return &#123; // æ„å»ºæ–°çš„å¯¹è±¡å¹¶ä¸”è¿”å›</span><br><span class="line">        ...state,</span><br><span class="line">        title: &#123;</span><br><span class="line">          ...state.title,</span><br><span class="line">          color: action.color</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    default:</span><br><span class="line">      return state // æ²¡æœ‰ä¿®æ”¹ï¼Œè¿”å›åŸæ¥çš„å¯¹è±¡</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const store = createStore(stateChanger)</span><br><span class="line">let oldState = store.getState() // ç¼“å­˜æ—§çš„ state</span><br><span class="line">store.subscribe(() =&gt; &#123;</span><br><span class="line">  const newState = store.getState() // æ•°æ®å¯èƒ½å˜åŒ–ï¼Œè·å–æ–°çš„ state</span><br><span class="line">  renderApp(newState, oldState) // æŠŠæ–°æ—§çš„ state ä¼ è¿›å»æ¸²æŸ“</span><br><span class="line">  oldState = newState // æ¸²æŸ“å®Œä»¥åï¼Œæ–°çš„ newState å˜æˆäº†æ—§çš„ oldStateï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡æ•°æ®å˜åŒ–é‡æ–°æ¸²æŸ“</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">renderApp(store.getState()) // é¦–æ¬¡æ¸²æŸ“é¡µé¢</span><br><span class="line">store.dispatch(&#123; type: &apos;UPDATE_TITLE_TEXT&apos;, text: &apos;ã€ŠReact.js is so cool!ã€‹&apos; &#125;) // ä¿®æ”¹æ ‡é¢˜æ–‡æœ¬</span><br><span class="line">store.dispatch(&#123; type: &apos;UPDATE_TITLE_COLOR&apos;, color: &apos;blue&apos; &#125;) // ä¿®æ”¹æ ‡é¢˜é¢œè‰²</span><br></pre></td></tr></table></figure></p>
<h1 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h1><p>ä½¿ç”¨Contextå’Œreduxå®ç°æ ¹æ®å…±äº«çŠ¶æ€è¿›è¡Œå­ç»„ä»¶æ¸²æŸ“çš„å·¥ä½œ</p>
<p><a href="https://github.com/YooHannah/make-react-redux/blob/master/src/index.js" target="_blank" rel="noopener">index.js</a></p>
<p><a href="https://github.com/YooHannah/make-react-redux/blob/master/src/react-redux.js" target="_blank" rel="noopener">react-redux.js</a></p>
<p><a href="https://github.com/YooHannah/make-react-redux/blob/master/src/ThemeSwitch.js" target="_blank" rel="noopener">ThemeSwitch.js</a></p>
<p><a href="https://github.com/YooHannah/make-react-redux/blob/master/src/Content.js" target="_blank" rel="noopener">Content.js</a></p>
<p><a href="https://github.com/YooHannah/make-react-redux/blob/master/src/Header.js" target="_blank" rel="noopener">Header.js</a></p>
<p>ä½¿ç”¨çœŸæ­£çš„react-redux<br>å³<br>import { connect } from â€˜react-reduxâ€™<br>import { createStore } from â€˜reduxâ€™<br>import { Provider } from â€˜react-reduxâ€™</p>
<p>æ ¹æ®æ˜¯å¦éœ€è¦é«˜åº¦çš„å¤ç”¨æ€§ï¼ŒæŠŠç»„ä»¶åˆ’åˆ†ä¸º Dumb å’Œ Smart ç»„ä»¶ï¼Œçº¦å®šä¿—æˆåœ°æŠŠå®ƒä»¬åˆ†åˆ«æ”¾åˆ° components å’Œ containers ç›®å½•ä¸‹ã€‚</p>
<p>Dumb åŸºæœ¬åªåšä¸€ä»¶äº‹æƒ… â€”â€” æ ¹æ® props è¿›è¡Œæ¸²æŸ“ã€‚è€Œ Smart åˆ™æ˜¯è´Ÿè´£åº”ç”¨çš„é€»è¾‘ã€æ•°æ®ï¼ŒæŠŠæ‰€æœ‰ç›¸å…³çš„ Dumbï¼ˆSmartï¼‰ç»„ä»¶ç»„åˆèµ·æ¥ï¼Œé€šè¿‡ props æ§åˆ¶å®ƒä»¬ã€‚</p>
<p>Smart ç»„ä»¶å¯ä»¥ä½¿ç”¨ Smartã€Dumb ç»„ä»¶ï¼›è€Œ Dumb ç»„ä»¶æœ€å¥½åªä½¿ç”¨ Dumb ç»„ä»¶ï¼Œå¦åˆ™å®ƒçš„å¤ç”¨æ€§å°±ä¼šä¸§å¤±ã€‚</p>
<p>è¦æ ¹æ®åº”ç”¨åœºæ™¯ä¸åŒåˆ’åˆ†ç»„ä»¶ï¼Œå¦‚æœä¸€ä¸ªç»„ä»¶å¹¶ä¸éœ€è¦å¤ªå¼ºçš„å¤ç”¨æ€§ï¼Œç›´æ¥è®©å®ƒæˆä¸º Smart å³å¯ï¼›å¦åˆ™å°±è®©å®ƒæˆä¸º Dumb ç»„ä»¶ã€‚</p>
<p>è¿˜æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼ŒSmart ç»„ä»¶å¹¶ä¸æ„å‘³ç€å®Œå…¨ä¸èƒ½å¤ç”¨ï¼ŒSmart ç»„ä»¶çš„å¤ç”¨æ€§æ˜¯ä¾èµ–åœºæ™¯çš„ï¼Œåœ¨ç‰¹å®šçš„åº”ç”¨åœºæ™¯ä¸‹æ˜¯å½“ç„¶æ˜¯å¯ä»¥å¤ç”¨ Smart çš„ã€‚è€Œ Dumb åˆ™æ˜¯å¯ä»¥è·¨åº”ç”¨åœºæ™¯å¤ç”¨ï¼ŒSmart å’Œ Dumb éƒ½å¯ä»¥å¤ç”¨ï¼Œåªæ˜¯ç¨‹åº¦ã€åœºæ™¯ä¸ä¸€æ ·ã€‚</p>
<p>ä¾‹å¦‚å°†ThemeSwitchæ‹†åˆ†æˆ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">/* src/components/ThemeSwitch.js */</span><br><span class="line">import React, &#123; Component, PropTypes &#125; from &apos;react&apos;</span><br><span class="line"></span><br><span class="line">export default class ThemeSwitch extends Component &#123;</span><br><span class="line">  static propTypes = &#123;</span><br><span class="line">    themeColor: PropTypes.string,</span><br><span class="line">    onSwitchColor: PropTypes.func</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleSwitchColor (color) &#123;</span><br><span class="line">    if (this.props.onSwitchColor) &#123;</span><br><span class="line">      this.props.onSwitchColor(color)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          style=&#123;&#123; color: this.props.themeColor &#125;&#125;</span><br><span class="line">          onClick=&#123;this.handleSwitchColor.bind(this, &apos;red&apos;)&#125;&gt;Red&lt;/button&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          style=&#123;&#123; color: this.props.themeColor &#125;&#125;</span><br><span class="line">          onClick=&#123;this.handleSwitchColor.bind(this, &apos;blue&apos;)&#125;&gt;Blue&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* src/containers/ThemeSwitch.js */</span><br><span class="line"></span><br><span class="line">import &#123; connect &#125; from &apos;react-redux&apos;</span><br><span class="line">import ThemeSwitch from &apos;../components/ThemeSwitch&apos;</span><br><span class="line"></span><br><span class="line">const mapStateToProps = (state) =&gt; &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    themeColor: state.themeColor</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const mapDispatchToProps = (dispatch) =&gt; &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    onSwitchColor: (color) =&gt; &#123;</span><br><span class="line">      dispatch(&#123; type: &apos;CHANGE_COLOR&apos;, themeColor: color &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default connect(mapStateToProps, mapDispatchToProps)(ThemeSwitch)</span><br></pre></td></tr></table></figure></p>
<p><a href="http://huziketang.com/books/react/lesson1" target="_blank" rel="noopener">å­¦ä¹ èµ„æ–™é“¾æ¥</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/react/" rel="tag"># react</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/post/performance/webpack.html" rel="next" title="å…³äºwebpack">
                <i class="fa fa-chevron-left"></i> å…³äºwebpack
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/post/react/EventEmitter.html" rel="prev" title="å®ç°ä¸€ä¸ª EventEmitter">
                å®ç°ä¸€ä¸ª EventEmitter <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/psb.jpg" alt="YooHannah">
          <p class="site-author-name" itemprop="name">YooHannah</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">245</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ç¯å¢ƒæ­å»º"><span class="nav-number">1.</span> <span class="nav-text">ç¯å¢ƒæ­å»º</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JSX"><span class="nav-number">2.</span> <span class="nav-text">JSX</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ç»„ä»¶æ ‘"><span class="nav-number">3.</span> <span class="nav-text">ç»„ä»¶æ ‘</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#äº‹ä»¶ç›‘å¬"><span class="nav-number">4.</span> <span class="nav-text">äº‹ä»¶ç›‘å¬</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#setStateå‡½æ•°å’Œpros"><span class="nav-number">5.</span> <span class="nav-text">setStateå‡½æ•°å’Œpros</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#æ–¹å¼ä¸€ï¼šåˆ©ç”¨stateçš„å€¼-é€šè¿‡æ¸²æŸ“æ§åˆ¶æ˜¾ç¤ºçŠ¶æ€"><span class="nav-number">5.1.</span> <span class="nav-text">æ–¹å¼ä¸€ï¼šåˆ©ç”¨stateçš„å€¼,é€šè¿‡æ¸²æŸ“æ§åˆ¶æ˜¾ç¤ºçŠ¶æ€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ–¹å¼äºŒï¼šåœ¨JSXä¸­ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼Œä¼ å…¥é…ç½®å±æ€§ï¼Œæ ¹æ®å±æ€§æ˜¾ç¤ºçŠ¶æ€"><span class="nav-number">5.2.</span> <span class="nav-text">æ–¹å¼äºŒï¼šåœ¨JSXä¸­ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼Œä¼ å…¥é…ç½®å±æ€§ï¼Œæ ¹æ®å±æ€§æ˜¾ç¤ºçŠ¶æ€</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å‡½æ•°å¼ç»„ä»¶"><span class="nav-number">6.</span> <span class="nav-text">å‡½æ•°å¼ç»„ä»¶</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æ¸²æŸ“åˆ—è¡¨æ•°æ®"><span class="nav-number">7.</span> <span class="nav-text">æ¸²æŸ“åˆ—è¡¨æ•°æ®</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å—æ§ç»„ä»¶"><span class="nav-number">8.</span> <span class="nav-text">å—æ§ç»„ä»¶</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ç”Ÿå‘½å‘¨æœŸ"><span class="nav-number">9.</span> <span class="nav-text">ç”Ÿå‘½å‘¨æœŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#æŒ‚è½½"><span class="nav-number">9.1.</span> <span class="nav-text">æŒ‚è½½</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ›´æ–°é˜¶æ®µ"><span class="nav-number">9.2.</span> <span class="nav-text">æ›´æ–°é˜¶æ®µ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#refå±æ€§"><span class="nav-number">10.</span> <span class="nav-text">refå±æ€§</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#dangerouslySetHTML"><span class="nav-number">11.</span> <span class="nav-text">dangerouslySetHTML</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#style"><span class="nav-number">12.</span> <span class="nav-text">style</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PropTypes-ç»„ä»¶å‚æ•°ç±»å‹éªŒè¯"><span class="nav-number">13.</span> <span class="nav-text">PropTypes ç»„ä»¶å‚æ•°ç±»å‹éªŒè¯</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å»ºè®®å‘½åå’Œå®šä¹‰é¡ºåº"><span class="nav-number">14.</span> <span class="nav-text">å»ºè®®å‘½åå’Œå®šä¹‰é¡ºåº</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#é«˜é˜¶ç»„ä»¶"><span class="nav-number">15.</span> <span class="nav-text">é«˜é˜¶ç»„ä»¶</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#context"><span class="nav-number">16.</span> <span class="nav-text">context</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#redux-æ¨¡å¼"><span class="nav-number">17.</span> <span class="nav-text">redux æ¨¡å¼</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#react-redux"><span class="nav-number">18.</span> <span class="nav-text">react-redux</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">YooHannah</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/treedocument/treedocument.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	




  
  

  

  

  

  


</body>
</html>
